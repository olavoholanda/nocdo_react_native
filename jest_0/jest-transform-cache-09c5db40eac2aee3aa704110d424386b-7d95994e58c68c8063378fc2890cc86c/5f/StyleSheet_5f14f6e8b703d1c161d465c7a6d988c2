5c70a55e10ea944cb344bbc435e4bee6
'use strict';

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");

var _objectSpread2 = _interopRequireDefault(require("@babel/runtime/helpers/objectSpread"));

var PixelRatio = require("../Utilities/PixelRatio");

var ReactNativeStyleAttributes = require("../Components/View/ReactNativeStyleAttributes");

var StyleSheetValidation = require("./StyleSheetValidation");

var flatten = require("./flattenStyle");

var hairlineWidth = PixelRatio.roundToNearestPixel(0.4);

if (hairlineWidth === 0) {
  hairlineWidth = 1 / PixelRatio.get();
}

var absoluteFill = {
  position: 'absolute',
  left: 0,
  right: 0,
  top: 0,
  bottom: 0
};

if (__DEV__) {
  Object.freeze(absoluteFill);
}

module.exports = {
  hairlineWidth: hairlineWidth,
  absoluteFill: absoluteFill,
  absoluteFillObject: absoluteFill,
  compose: function compose(style1, style2) {
    if (style1 != null && style2 != null) {
      return [style1, style2];
    } else {
      return style1 != null ? style1 : style2;
    }
  },
  flatten: flatten,
  setStyleAttributePreprocessor: function setStyleAttributePreprocessor(property, process) {
    var value;

    if (typeof ReactNativeStyleAttributes[property] === 'string') {
      value = {};
    } else if (typeof ReactNativeStyleAttributes[property] === 'object') {
      value = ReactNativeStyleAttributes[property];
    } else {
      console.error(property + " is not a valid style attribute");
      return;
    }

    if (__DEV__ && typeof value.process === 'function') {
      console.warn("Overwriting " + property + " style attribute preprocessor");
    }

    ReactNativeStyleAttributes[property] = (0, _objectSpread2.default)({}, value, {
      process: process
    });
  },
  create: function create(obj) {
    if (__DEV__) {
      for (var _key in obj) {
        StyleSheetValidation.validateStyle(_key, obj);

        if (obj[_key]) {
          Object.freeze(obj[_key]);
        }
      }
    }

    return obj;
  }
};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIlN0eWxlU2hlZXQuanMiXSwibmFtZXMiOlsiUGl4ZWxSYXRpbyIsInJlcXVpcmUiLCJSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyIsIlN0eWxlU2hlZXRWYWxpZGF0aW9uIiwiZmxhdHRlbiIsImhhaXJsaW5lV2lkdGgiLCJyb3VuZFRvTmVhcmVzdFBpeGVsIiwiZ2V0IiwiYWJzb2x1dGVGaWxsIiwicG9zaXRpb24iLCJsZWZ0IiwicmlnaHQiLCJ0b3AiLCJib3R0b20iLCJfX0RFVl9fIiwiT2JqZWN0IiwiZnJlZXplIiwibW9kdWxlIiwiZXhwb3J0cyIsImFic29sdXRlRmlsbE9iamVjdCIsImNvbXBvc2UiLCJzdHlsZTEiLCJzdHlsZTIiLCJzZXRTdHlsZUF0dHJpYnV0ZVByZXByb2Nlc3NvciIsInByb3BlcnR5IiwicHJvY2VzcyIsInZhbHVlIiwiY29uc29sZSIsImVycm9yIiwid2FybiIsImNyZWF0ZSIsIm9iaiIsImtleSIsInZhbGlkYXRlU3R5bGUiXSwibWFwcGluZ3MiOiJBQVNBOzs7Ozs7QUFFQSxJQUFNQSxVQUFVLEdBQUdDLE9BQU8sMkJBQTFCOztBQUNBLElBQU1DLDBCQUEwQixHQUFHRCxPQUFPLGlEQUExQzs7QUFDQSxJQUFNRSxvQkFBb0IsR0FBR0YsT0FBTywwQkFBcEM7O0FBRUEsSUFBTUcsT0FBTyxHQUFHSCxPQUFPLGtCQUF2Qjs7QUFzSkEsSUFBSUksYUFBYSxHQUFHTCxVQUFVLENBQUNNLG1CQUFYLENBQStCLEdBQS9CLENBQXBCOztBQUNBLElBQUlELGFBQWEsS0FBSyxDQUF0QixFQUF5QjtBQUN2QkEsRUFBQUEsYUFBYSxHQUFHLElBQUlMLFVBQVUsQ0FBQ08sR0FBWCxFQUFwQjtBQUNEOztBQUVELElBQU1DLFlBQXlCLEdBQUc7QUFDaENDLEVBQUFBLFFBQVEsRUFBRSxVQURzQjtBQUVoQ0MsRUFBQUEsSUFBSSxFQUFFLENBRjBCO0FBR2hDQyxFQUFBQSxLQUFLLEVBQUUsQ0FIeUI7QUFJaENDLEVBQUFBLEdBQUcsRUFBRSxDQUoyQjtBQUtoQ0MsRUFBQUEsTUFBTSxFQUFFO0FBTHdCLENBQWxDOztBQU9BLElBQUlDLE9BQUosRUFBYTtBQUNYQyxFQUFBQSxNQUFNLENBQUNDLE1BQVAsQ0FBY1IsWUFBZDtBQUNEOztBQThDRFMsTUFBTSxDQUFDQyxPQUFQLEdBQWlCO0FBb0JmYixFQUFBQSxhQUFhLEVBQWJBLGFBcEJlO0FBMkJmRyxFQUFBQSxZQUFZLEVBQUdBLFlBM0JBO0FBeUNmVyxFQUFBQSxrQkFBa0IsRUFBRVgsWUF6Q0w7QUFpRGZZLEVBQUFBLE9BakRlLG1CQWtEYkMsTUFsRGEsRUFtRGJDLE1BbkRhLEVBb0RXO0FBQ3hCLFFBQUlELE1BQU0sSUFBSSxJQUFWLElBQWtCQyxNQUFNLElBQUksSUFBaEMsRUFBc0M7QUFDcEMsYUFBUSxDQUFDRCxNQUFELEVBQVNDLE1BQVQsQ0FBUjtBQUNELEtBRkQsTUFFTztBQUNMLGFBQU9ELE1BQU0sSUFBSSxJQUFWLEdBQWlCQSxNQUFqQixHQUEwQkMsTUFBakM7QUFDRDtBQUNGLEdBMURjO0FBbUdmbEIsRUFBQUEsT0FBTyxFQUFQQSxPQW5HZTtBQThHZm1CLEVBQUFBLDZCQTlHZSx5Q0ErR2JDLFFBL0dhLEVBZ0hiQyxPQWhIYSxFQWlIYjtBQUNBLFFBQUlDLEtBQUo7O0FBRUEsUUFBSSxPQUFPeEIsMEJBQTBCLENBQUNzQixRQUFELENBQWpDLEtBQWdELFFBQXBELEVBQThEO0FBQzVERSxNQUFBQSxLQUFLLEdBQUcsRUFBUjtBQUNELEtBRkQsTUFFTyxJQUFJLE9BQU94QiwwQkFBMEIsQ0FBQ3NCLFFBQUQsQ0FBakMsS0FBZ0QsUUFBcEQsRUFBOEQ7QUFDbkVFLE1BQUFBLEtBQUssR0FBR3hCLDBCQUEwQixDQUFDc0IsUUFBRCxDQUFsQztBQUNELEtBRk0sTUFFQTtBQUNMRyxNQUFBQSxPQUFPLENBQUNDLEtBQVIsQ0FBaUJKLFFBQWpCO0FBQ0E7QUFDRDs7QUFFRCxRQUFJVixPQUFPLElBQUksT0FBT1ksS0FBSyxDQUFDRCxPQUFiLEtBQXlCLFVBQXhDLEVBQW9EO0FBQ2xERSxNQUFBQSxPQUFPLENBQUNFLElBQVIsa0JBQTRCTCxRQUE1QjtBQUNEOztBQUVEdEIsSUFBQUEsMEJBQTBCLENBQUNzQixRQUFELENBQTFCLG1DQUEyQ0UsS0FBM0M7QUFBa0RELE1BQUFBLE9BQU8sRUFBUEE7QUFBbEQ7QUFDRCxHQWxJYztBQXVJZkssRUFBQUEsTUF2SWUsa0JBdUlpQkMsR0F2SWpCLEVBdUlzRDtBQUluRSxRQUFJakIsT0FBSixFQUFhO0FBQ1gsV0FBSyxJQUFNa0IsSUFBWCxJQUFrQkQsR0FBbEIsRUFBdUI7QUFDckI1QixRQUFBQSxvQkFBb0IsQ0FBQzhCLGFBQXJCLENBQW1DRCxJQUFuQyxFQUF3Q0QsR0FBeEM7O0FBQ0EsWUFBSUEsR0FBRyxDQUFDQyxJQUFELENBQVAsRUFBYztBQUNaakIsVUFBQUEsTUFBTSxDQUFDQyxNQUFQLENBQWNlLEdBQUcsQ0FBQ0MsSUFBRCxDQUFqQjtBQUNEO0FBQ0Y7QUFDRjs7QUFDRCxXQUFPRCxHQUFQO0FBQ0Q7QUFwSmMsQ0FBakIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvcHlyaWdodCAoYykgMjAxNS1wcmVzZW50LCBGYWNlYm9vaywgSW5jLlxuICpcbiAqIFRoaXMgc291cmNlIGNvZGUgaXMgbGljZW5zZWQgdW5kZXIgdGhlIE1JVCBsaWNlbnNlIGZvdW5kIGluIHRoZVxuICogTElDRU5TRSBmaWxlIGluIHRoZSByb290IGRpcmVjdG9yeSBvZiB0aGlzIHNvdXJjZSB0cmVlLlxuICpcbiAqIEBmbG93XG4gKiBAZm9ybWF0XG4gKi9cbid1c2Ugc3RyaWN0JztcblxuY29uc3QgUGl4ZWxSYXRpbyA9IHJlcXVpcmUoJy4uL1V0aWxpdGllcy9QaXhlbFJhdGlvJyk7XG5jb25zdCBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcyA9IHJlcXVpcmUoJy4uL0NvbXBvbmVudHMvVmlldy9SZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlcycpO1xuY29uc3QgU3R5bGVTaGVldFZhbGlkYXRpb24gPSByZXF1aXJlKCcuL1N0eWxlU2hlZXRWYWxpZGF0aW9uJyk7XG5cbmNvbnN0IGZsYXR0ZW4gPSByZXF1aXJlKCcuL2ZsYXR0ZW5TdHlsZScpO1xuXG5pbXBvcnQgdHlwZSB7XG4gIF9fX19TdHlsZXNfSW50ZXJuYWwsXG4gIF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsLFxuICBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3BfSW50ZXJuYWwsXG4gIF9fX19WaWV3U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19WaWV3U3R5bGVQcm9wX0ludGVybmFsLFxuICBfX19fVGV4dFN0eWxlX0ludGVybmFsLFxuICBfX19fVGV4dFN0eWxlUHJvcF9JbnRlcm5hbCxcbiAgX19fX0ltYWdlU3R5bGVfSW50ZXJuYWwsXG4gIF9fX19JbWFnZVN0eWxlUHJvcF9JbnRlcm5hbCxcbiAgX19fX0xheW91dFN0eWxlX0ludGVybmFsLFxuICBfX19fU2hhZG93U3R5bGVfSW50ZXJuYWwsXG4gIF9fX19UcmFuc2Zvcm1TdHlsZV9JbnRlcm5hbCxcbn0gZnJvbSAnLi9TdHlsZVNoZWV0VHlwZXMnO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYSBwcm9wIHRoYXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHRvIGEgPFZpZXc+J3MgYHN0eWxlYCBwcm9wLiBUaGlzIGVuc3VyZXMgY2FsbCBzaXRlcyBvZiB0aGUgY29tcG9uZW50XG4gKiBjYW4ndCBwYXNzIHN0eWxlcyB0aGF0IFZpZXcgZG9lc24ndCBzdXBwb3J0IHN1Y2ggYXMgYGZvbnRTaXplYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogVmlld1N0eWxlUHJvcH1cbiAqIGNvbnN0IE15Q29tcG9uZW50ID0gKHByb3BzOiBQcm9wcykgPT4gPFZpZXcgc3R5bGU9e3Byb3BzLnN0eWxlfSAvPlxuICovXG5leHBvcnQgdHlwZSBWaWV3U3R5bGVQcm9wID0gX19fX1ZpZXdTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIHNob3VsZCBiZSB1c2VkIGFzIHRoZSB0eXBlIGZvciBhIHByb3AgdGhhdCBpcyBwYXNzZWQgdGhyb3VnaFxuICogdG8gYSA8VGV4dD4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgVGV4dCBkb2Vzbid0IHN1cHBvcnQgc3VjaCBhcyBgcmVzaXplTW9kZWAuYFxuICpcbiAqIHR5cGUgUHJvcHMgPSB7c3R5bGU6IFRleHRTdHlsZVByb3B9XG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IChwcm9wczogUHJvcHMpID0+IDxUZXh0IHN0eWxlPXtwcm9wcy5zdHlsZX0gLz5cbiAqL1xuZXhwb3J0IHR5cGUgVGV4dFN0eWxlUHJvcCA9IF9fX19UZXh0U3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFRoaXMgdHlwZSBzaG91bGQgYmUgdXNlZCBhcyB0aGUgdHlwZSBmb3IgYSBwcm9wIHRoYXQgaXMgcGFzc2VkIHRocm91Z2hcbiAqIHRvIGFuIDxJbWFnZT4ncyBgc3R5bGVgIHByb3AuIFRoaXMgZW5zdXJlcyBjYWxsIHNpdGVzIG9mIHRoZSBjb21wb25lbnRcbiAqIGNhbid0IHBhc3Mgc3R5bGVzIHRoYXQgSW1hZ2UgZG9lc24ndCBzdXBwb3J0IHN1Y2ggYXMgYGZvbnRTaXplYC5gXG4gKlxuICogdHlwZSBQcm9wcyA9IHtzdHlsZTogSW1hZ2VTdHlsZVByb3B9XG4gKiBjb25zdCBNeUNvbXBvbmVudCA9IChwcm9wczogUHJvcHMpID0+IDxJbWFnZSBzdHlsZT17cHJvcHMuc3R5bGV9IC8+XG4gKi9cbmV4cG9ydCB0eXBlIEltYWdlU3R5bGVQcm9wID0gX19fX0ltYWdlU3R5bGVQcm9wX0ludGVybmFsO1xuXG4vKipcbiAqIFdBUk5JTkc6IFlvdSBwcm9iYWJseSBzaG91bGRuJ3QgYmUgdXNpbmcgdGhpcyB0eXBlLiBUaGlzIHR5cGVcbiAqIGlzIHNpbWlsYXIgdG8gdGhlIG9uZXMgYWJvdmUgZXhjZXB0IGl0IGFsbG93cyBzdHlsZXMgdGhhdCBhcmUgYWNjZXB0ZWRcbiAqIGJ5IGFsbCBvZiBWaWV3LCBUZXh0LCBvciBJbWFnZS4gSXQgaXMgdGhlcmVmb3JlIHZlcnkgdW5zYWZlIHRvIHBhc3MgdGhpc1xuICogdGhyb3VnaCB0byBhbiB1bmRlcmx5aW5nIGNvbXBvbmVudC4gVXNpbmcgdGhpcyBpcyBhbG1vc3QgYWx3YXlzIGEgbWlzdGFrZVxuICogYW5kIHVzaW5nIG9uZSBvZiB0aGUgb3RoZXIgbW9yZSByZXN0cmljdGl2ZSB0eXBlcyBpcyBsaWtlbHkgdGhlIHJpZ2h0IGNob2ljZS5cbiAqL1xuZXhwb3J0IHR5cGUgRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3AgPSBfX19fRGFuZ2Vyb3VzbHlJbXByZWNpc2VTdHlsZVByb3BfSW50ZXJuYWw7XG5cbi8qKlxuICogVXRpbGl0eSB0eXBlIGZvciBnZXR0aW5nIHRoZSB2YWx1ZXMgZm9yIHNwZWNpZmljIHN0eWxlIGtleXMuXG4gKlxuICogVGhlIGZvbGxvd2luZyBpcyBiYWQgYmVjYXVzZSBwb3NpdGlvbiBpcyBtb3JlIHJlc3RyaWN0aXZlIHRoYW4gJ3N0cmluZyc6XG4gKiBgYGBcbiAqIHR5cGUgUHJvcHMgPSB7cG9zaXRpb246IHN0cmluZ307XG4gKiBgYGBcbiAqXG4gKiBZb3Ugc2hvdWxkIHVzZSB0aGUgZm9sbG93aW5nIGluc3RlYWQ6XG4gKlxuICogYGBgXG4gKiB0eXBlIFByb3BzID0ge3Bvc2l0aW9uOiBUeXBlRm9yU3R5bGVLZXk8J3Bvc2l0aW9uJz59O1xuICogYGBgXG4gKlxuICogVGhpcyB3aWxsIGNvcnJlY3RseSBnaXZlIHlvdSB0aGUgdHlwZSAnYWJzb2x1dGUnIHwgJ3JlbGF0aXZlJ1xuICovXG5leHBvcnQgdHlwZSBUeXBlRm9yU3R5bGVLZXk8XG4gICtrZXk6ICRLZXlzPF9fX19EYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlX0ludGVybmFsPixcbj4gPSAkRWxlbWVudFR5cGU8X19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWwsIGtleT47XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgVmlldy5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgVmlld1N0eWxlUHJvcC5cbiAqXG4gKiBBIHJlYXNvbmFibGUgdXNhZ2Ugb2YgdGhpcyB0eXBlIGlzIGZvciBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFuXG4gKiBvYmplY3Qgb2Ygc3R5bGVzIHRvIHBhc3MgdG8gYSBWaWV3IHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFZpZXdTdHlsZSA9IF9fX19WaWV3U3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgVGV4dC5cbiAqXG4gKiBOb3RlIHRoYXQgdGhpcyBpc24ndCBhIHNhZmUgd2F5IHRvIHR5cGUgYSBzdHlsZSBwcm9wIGZvciBhIGNvbXBvbmVudCBhc1xuICogcmVzdWx0cyBmcm9tIFN0eWxlU2hlZXQuY3JlYXRlIHJldHVybiBhbiBpbnRlcm5hbCBpZGVudGlmaWVyLCBub3RcbiAqIGFuIG9iamVjdCBvZiBzdHlsZXMuXG4gKlxuICogSWYgeW91IHdhbnQgdG8gdHlwZSB0aGUgc3R5bGUgcHJvcCBvZiBhIGZ1bmN0aW9uLFxuICogY29uc2lkZXIgdXNpbmcgVGV4dFN0eWxlUHJvcC5cbiAqXG4gKiBBIHJlYXNvbmFibGUgdXNhZ2Ugb2YgdGhpcyB0eXBlIGlzIGZvciBoZWxwZXIgZnVuY3Rpb25zIHRoYXQgcmV0dXJuIGFuXG4gKiBvYmplY3Qgb2Ygc3R5bGVzIHRvIHBhc3MgdG8gYSBUZXh0IHRoYXQgY2FuJ3QgYmUgcHJlY29tcHV0ZWQgd2l0aFxuICogU3R5bGVTaGVldC5jcmVhdGUuXG4gKi9cbmV4cG9ydCB0eXBlIFRleHRTdHlsZSA9IF9fX19UZXh0U3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhpcyB0eXBlIGlzIGFuIG9iamVjdCBvZiB0aGUgZGlmZmVyZW50IHBvc3NpYmxlIHN0eWxlXG4gKiBwcm9wZXJ0aWVzIHRoYXQgY2FuIGJlIHNwZWNpZmllZCBmb3IgSW1hZ2UuXG4gKlxuICogTm90ZSB0aGF0IHRoaXMgaXNuJ3QgYSBzYWZlIHdheSB0byB0eXBlIGEgc3R5bGUgcHJvcCBmb3IgYSBjb21wb25lbnQgYXNcbiAqIHJlc3VsdHMgZnJvbSBTdHlsZVNoZWV0LmNyZWF0ZSByZXR1cm4gYW4gaW50ZXJuYWwgaWRlbnRpZmllciwgbm90XG4gKiBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbixcbiAqIGNvbnNpZGVyIHVzaW5nIEltYWdlU3R5bGVQcm9wLlxuICpcbiAqIEEgcmVhc29uYWJsZSB1c2FnZSBvZiB0aGlzIHR5cGUgaXMgZm9yIGhlbHBlciBmdW5jdGlvbnMgdGhhdCByZXR1cm4gYW5cbiAqIG9iamVjdCBvZiBzdHlsZXMgdG8gcGFzcyB0byBhbiBJbWFnZSB0aGF0IGNhbid0IGJlIHByZWNvbXB1dGVkIHdpdGhcbiAqIFN0eWxlU2hlZXQuY3JlYXRlLlxuICovXG5leHBvcnQgdHlwZSBJbWFnZVN0eWxlID0gX19fX0ltYWdlU3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogV0FSTklORzogWW91IHByb2JhYmx5IHNob3VsZG4ndCBiZSB1c2luZyB0aGlzIHR5cGUuIFRoaXMgdHlwZSBpcyBhbiBvYmplY3RcbiAqIHdpdGggYWxsIHBvc3NpYmxlIHN0eWxlIGtleXMgYW5kIHRoZWlyIHZhbHVlcy4gTm90ZSB0aGF0IHRoaXMgaXNuJ3RcbiAqIGEgc2FmZSB3YXkgdG8gdHlwZSBhIHN0eWxlIHByb3AgZm9yIGEgY29tcG9uZW50IGFzIHJlc3VsdHMgZnJvbVxuICogU3R5bGVTaGVldC5jcmVhdGUgcmV0dXJuIGFuIGludGVybmFsIGlkZW50aWZpZXIsIG5vdCBhbiBvYmplY3Qgb2Ygc3R5bGVzLlxuICpcbiAqIElmIHlvdSB3YW50IHRvIHR5cGUgdGhlIHN0eWxlIHByb3Agb2YgYSBmdW5jdGlvbiwgY29uc2lkZXIgdXNpbmdcbiAqIFZpZXdTdHlsZVByb3AsIFRleHRTdHlsZVByb3AsIG9yIEltYWdlU3R5bGVQcm9wLlxuICpcbiAqIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBieSB2ZXJ5IGNvcmUgdXRpbGl0aWVzIHRoYXQgb3BlcmF0ZSBvbiBhbiBvYmplY3RcbiAqIGNvbnRhaW5pbmcgYW55IHBvc3NpYmxlIHN0eWxlIHZhbHVlLlxuICovXG5leHBvcnQgdHlwZSBEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlID0gX19fX0Rhbmdlcm91c2x5SW1wcmVjaXNlU3R5bGVfSW50ZXJuYWw7XG5cbi8qKlxuICogVGhlc2UgdHlwZXMgYXJlIHNpbWxpbGFyIHRvIHRoZSBzdHlsZSB0eXBlcyBhYm92ZS4gVGhleSBhcmUgb2JqZWN0cyBvZiB0aGVcbiAqIHBvc3NpYmxlIHN0eWxlIGtleXMgaW4gdGhhdCBncm91cC4gRm9yIGV4YW1wbGUsIFNoYWRvd1N0eWxlIGNvbnRhaW5zXG4gKiBrZXlzIGxpa2UgYHNoYWRvd0NvbG9yYCBhbmQgYHNoYWRvd1JhZGl1c2AuXG4gKi9cbmV4cG9ydCB0eXBlIExheW91dFN0eWxlID0gX19fX0xheW91dFN0eWxlX0ludGVybmFsO1xuZXhwb3J0IHR5cGUgU2hhZG93U3R5bGUgPSBfX19fU2hhZG93U3R5bGVfSW50ZXJuYWw7XG5leHBvcnQgdHlwZSBUcmFuc2Zvcm1TdHlsZSA9IF9fX19UcmFuc2Zvcm1TdHlsZV9JbnRlcm5hbDtcblxubGV0IGhhaXJsaW5lV2lkdGggPSBQaXhlbFJhdGlvLnJvdW5kVG9OZWFyZXN0UGl4ZWwoMC40KTtcbmlmIChoYWlybGluZVdpZHRoID09PSAwKSB7XG4gIGhhaXJsaW5lV2lkdGggPSAxIC8gUGl4ZWxSYXRpby5nZXQoKTtcbn1cblxuY29uc3QgYWJzb2x1dGVGaWxsOiBMYXlvdXRTdHlsZSA9IHtcbiAgcG9zaXRpb246ICdhYnNvbHV0ZScsXG4gIGxlZnQ6IDAsXG4gIHJpZ2h0OiAwLFxuICB0b3A6IDAsXG4gIGJvdHRvbTogMCxcbn07XG5pZiAoX19ERVZfXykge1xuICBPYmplY3QuZnJlZXplKGFic29sdXRlRmlsbCk7XG59XG5cbi8qKlxuICogQSBTdHlsZVNoZWV0IGlzIGFuIGFic3RyYWN0aW9uIHNpbWlsYXIgdG8gQ1NTIFN0eWxlU2hlZXRzXG4gKlxuICogQ3JlYXRlIGEgbmV3IFN0eWxlU2hlZXQ6XG4gKlxuICogYGBgXG4gKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gKiAgIGNvbnRhaW5lcjoge1xuICogICAgIGJvcmRlclJhZGl1czogNCxcbiAqICAgICBib3JkZXJXaWR0aDogMC41LFxuICogICAgIGJvcmRlckNvbG9yOiAnI2Q2ZDdkYScsXG4gKiAgIH0sXG4gKiAgIHRpdGxlOiB7XG4gKiAgICAgZm9udFNpemU6IDE5LFxuICogICAgIGZvbnRXZWlnaHQ6ICdib2xkJyxcbiAqICAgfSxcbiAqICAgYWN0aXZlVGl0bGU6IHtcbiAqICAgICBjb2xvcjogJ3JlZCcsXG4gKiAgIH0sXG4gKiB9KTtcbiAqIGBgYFxuICpcbiAqIFVzZSBhIFN0eWxlU2hlZXQ6XG4gKlxuICogYGBgXG4gKiA8VmlldyBzdHlsZT17c3R5bGVzLmNvbnRhaW5lcn0+XG4gKiAgIDxUZXh0IHN0eWxlPXtbc3R5bGVzLnRpdGxlLCB0aGlzLnByb3BzLmlzQWN0aXZlICYmIHN0eWxlcy5hY3RpdmVUaXRsZV19IC8+XG4gKiA8L1ZpZXc+XG4gKiBgYGBcbiAqXG4gKiBDb2RlIHF1YWxpdHk6XG4gKlxuICogIC0gQnkgbW92aW5nIHN0eWxlcyBhd2F5IGZyb20gdGhlIHJlbmRlciBmdW5jdGlvbiwgeW91J3JlIG1ha2luZyB0aGUgY29kZVxuICogIGVhc2llciB0byB1bmRlcnN0YW5kLlxuICogIC0gTmFtaW5nIHRoZSBzdHlsZXMgaXMgYSBnb29kIHdheSB0byBhZGQgbWVhbmluZyB0byB0aGUgbG93IGxldmVsIGNvbXBvbmVudHNcbiAqICBpbiB0aGUgcmVuZGVyIGZ1bmN0aW9uLlxuICpcbiAqIFBlcmZvcm1hbmNlOlxuICpcbiAqICAtIE1ha2luZyBhIHN0eWxlc2hlZXQgZnJvbSBhIHN0eWxlIG9iamVjdCBtYWtlcyBpdCBwb3NzaWJsZSB0byByZWZlciB0byBpdFxuICogYnkgSUQgaW5zdGVhZCBvZiBjcmVhdGluZyBhIG5ldyBzdHlsZSBvYmplY3QgZXZlcnkgdGltZS5cbiAqICAtIEl0IGFsc28gYWxsb3dzIHRvIHNlbmQgdGhlIHN0eWxlIG9ubHkgb25jZSB0aHJvdWdoIHRoZSBicmlkZ2UuIEFsbFxuICogc3Vic2VxdWVudCB1c2VzIGFyZSBnb2luZyB0byByZWZlciBhbiBpZCAobm90IGltcGxlbWVudGVkIHlldCkuXG4gKi9cbm1vZHVsZS5leHBvcnRzID0ge1xuICAvKipcbiAgICogVGhpcyBpcyBkZWZpbmVkIGFzIHRoZSB3aWR0aCBvZiBhIHRoaW4gbGluZSBvbiB0aGUgcGxhdGZvcm0uIEl0IGNhbiBiZVxuICAgKiB1c2VkIGFzIHRoZSB0aGlja25lc3Mgb2YgYSBib3JkZXIgb3IgZGl2aXNpb24gYmV0d2VlbiB0d28gZWxlbWVudHMuXG4gICAqIEV4YW1wbGU6XG4gICAqIGBgYFxuICAgKiAgIHtcbiAgICogICAgIGJvcmRlckJvdHRvbUNvbG9yOiAnI2JiYicsXG4gICAqICAgICBib3JkZXJCb3R0b21XaWR0aDogU3R5bGVTaGVldC5oYWlybGluZVdpZHRoXG4gICAqICAgfVxuICAgKiBgYGBcbiAgICpcbiAgICogVGhpcyBjb25zdGFudCB3aWxsIGFsd2F5cyBiZSBhIHJvdW5kIG51bWJlciBvZiBwaXhlbHMgKHNvIGEgbGluZSBkZWZpbmVkXG4gICAqIGJ5IGl0IGxvb2sgY3Jpc3ApIGFuZCB3aWxsIHRyeSB0byBtYXRjaCB0aGUgc3RhbmRhcmQgd2lkdGggb2YgYSB0aGluIGxpbmVcbiAgICogb24gdGhlIHVuZGVybHlpbmcgcGxhdGZvcm0uIEhvd2V2ZXIsIHlvdSBzaG91bGQgbm90IHJlbHkgb24gaXQgYmVpbmcgYVxuICAgKiBjb25zdGFudCBzaXplLCBiZWNhdXNlIG9uIGRpZmZlcmVudCBwbGF0Zm9ybXMgYW5kIHNjcmVlbiBkZW5zaXRpZXMgaXRzXG4gICAqIHZhbHVlIG1heSBiZSBjYWxjdWxhdGVkIGRpZmZlcmVudGx5LlxuICAgKlxuICAgKiBBIGxpbmUgd2l0aCBoYWlybGluZSB3aWR0aCBtYXkgbm90IGJlIHZpc2libGUgaWYgeW91ciBzaW11bGF0b3IgaXMgZG93bnNjYWxlZC5cbiAgICovXG4gIGhhaXJsaW5lV2lkdGgsXG5cbiAgLyoqXG4gICAqIEEgdmVyeSBjb21tb24gcGF0dGVybiBpcyB0byBjcmVhdGUgb3ZlcmxheXMgd2l0aCBwb3NpdGlvbiBhYnNvbHV0ZSBhbmQgemVybyBwb3NpdGlvbmluZyxcbiAgICogc28gYGFic29sdXRlRmlsbGAgY2FuIGJlIHVzZWQgZm9yIGNvbnZlbmllbmNlIGFuZCB0byByZWR1Y2UgZHVwbGljYXRpb24gb2YgdGhlc2UgcmVwZWF0ZWRcbiAgICogc3R5bGVzLlxuICAgKi9cbiAgYWJzb2x1dGVGaWxsOiAoYWJzb2x1dGVGaWxsOiBhbnkpLCAvLyBUT0RPOiBUaGlzIHNob3VsZCBiZSB1cGRhdGVkIGFmdGVyIHdlIGZpeCBkb3duc3RyZWFtIEZsb3cgc2l0ZXMuXG5cbiAgLyoqXG4gICAqIFNvbWV0aW1lcyB5b3UgbWF5IHdhbnQgYGFic29sdXRlRmlsbGAgYnV0IHdpdGggYSBjb3VwbGUgdHdlYWtzIC0gYGFic29sdXRlRmlsbE9iamVjdGAgY2FuIGJlXG4gICAqIHVzZWQgdG8gY3JlYXRlIGEgY3VzdG9taXplZCBlbnRyeSBpbiBhIGBTdHlsZVNoZWV0YCwgZS5nLjpcbiAgICpcbiAgICogICBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAqICAgICB3cmFwcGVyOiB7XG4gICAqICAgICAgIC4uLlN0eWxlU2hlZXQuYWJzb2x1dGVGaWxsT2JqZWN0LFxuICAgKiAgICAgICB0b3A6IDEwLFxuICAgKiAgICAgICBiYWNrZ3JvdW5kQ29sb3I6ICd0cmFuc3BhcmVudCcsXG4gICAqICAgICB9LFxuICAgKiAgIH0pO1xuICAgKi9cbiAgYWJzb2x1dGVGaWxsT2JqZWN0OiBhYnNvbHV0ZUZpbGwsXG5cbiAgLyoqXG4gICAqIENvbWJpbmVzIHR3byBzdHlsZXMgc3VjaCB0aGF0IGBzdHlsZTJgIHdpbGwgb3ZlcnJpZGUgYW55IHN0eWxlcyBpbiBgc3R5bGUxYC5cbiAgICogSWYgZWl0aGVyIHN0eWxlIGlzIGZhbHN5LCB0aGUgb3RoZXIgb25lIGlzIHJldHVybmVkIHdpdGhvdXQgYWxsb2NhdGluZyBhblxuICAgKiBhcnJheSwgc2F2aW5nIGFsbG9jYXRpb25zIGFuZCBtYWludGFpbmluZyByZWZlcmVuY2UgZXF1YWxpdHkgZm9yXG4gICAqIFB1cmVDb21wb25lbnQgY2hlY2tzLlxuICAgKi9cbiAgY29tcG9zZTxUOiBEYW5nZXJvdXNseUltcHJlY2lzZVN0eWxlUHJvcD4oXG4gICAgc3R5bGUxOiA/VCxcbiAgICBzdHlsZTI6ID9ULFxuICApOiA/VCB8ICRSZWFkT25seUFycmF5PFQ+IHtcbiAgICBpZiAoc3R5bGUxICE9IG51bGwgJiYgc3R5bGUyICE9IG51bGwpIHtcbiAgICAgIHJldHVybiAoW3N0eWxlMSwgc3R5bGUyXTogJFJlYWRPbmx5QXJyYXk8VD4pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc3R5bGUxICE9IG51bGwgPyBzdHlsZTEgOiBzdHlsZTI7XG4gICAgfVxuICB9LFxuXG4gIC8qKlxuICAgKiBGbGF0dGVucyBhbiBhcnJheSBvZiBzdHlsZSBvYmplY3RzLCBpbnRvIG9uZSBhZ2dyZWdhdGVkIHN0eWxlIG9iamVjdC5cbiAgICogQWx0ZXJuYXRpdmVseSwgdGhpcyBtZXRob2QgY2FuIGJlIHVzZWQgdG8gbG9va3VwIElEcywgcmV0dXJuZWQgYnlcbiAgICogU3R5bGVTaGVldC5yZWdpc3Rlci5cbiAgICpcbiAgICogPiAqKk5PVEUqKjogRXhlcmNpc2UgY2F1dGlvbiBhcyBhYnVzaW5nIHRoaXMgY2FuIHRheCB5b3UgaW4gdGVybXMgb2ZcbiAgICogPiBvcHRpbWl6YXRpb25zLlxuICAgKiA+XG4gICAqID4gSURzIGVuYWJsZSBvcHRpbWl6YXRpb25zIHRocm91Z2ggdGhlIGJyaWRnZSBhbmQgbWVtb3J5IGluIGdlbmVyYWwuIFJlZmVyaW5nXG4gICAqID4gdG8gc3R5bGUgb2JqZWN0cyBkaXJlY3RseSB3aWxsIGRlcHJpdmUgeW91IG9mIHRoZXNlIG9wdGltaXphdGlvbnMuXG4gICAqXG4gICAqIEV4YW1wbGU6XG4gICAqIGBgYFxuICAgKiBjb25zdCBzdHlsZXMgPSBTdHlsZVNoZWV0LmNyZWF0ZSh7XG4gICAqICAgbGlzdEl0ZW06IHtcbiAgICogICAgIGZsZXg6IDEsXG4gICAqICAgICBmb250U2l6ZTogMTYsXG4gICAqICAgICBjb2xvcjogJ3doaXRlJ1xuICAgKiAgIH0sXG4gICAqICAgc2VsZWN0ZWRMaXN0SXRlbToge1xuICAgKiAgICAgY29sb3I6ICdncmVlbidcbiAgICogICB9XG4gICAqIH0pO1xuICAgKlxuICAgKiBTdHlsZVNoZWV0LmZsYXR0ZW4oW3N0eWxlcy5saXN0SXRlbSwgc3R5bGVzLnNlbGVjdGVkTGlzdEl0ZW1dKVxuICAgKiAvLyByZXR1cm5zIHsgZmxleDogMSwgZm9udFNpemU6IDE2LCBjb2xvcjogJ2dyZWVuJyB9XG4gICAqIGBgYFxuICAgKiBBbHRlcm5hdGl2ZSB1c2U6XG4gICAqIGBgYFxuICAgKiBTdHlsZVNoZWV0LmZsYXR0ZW4oc3R5bGVzLmxpc3RJdGVtKTtcbiAgICogLy8gcmV0dXJuIHsgZmxleDogMSwgZm9udFNpemU6IDE2LCBjb2xvcjogJ3doaXRlJyB9XG4gICAqIC8vIFNpbXBseSBzdHlsZXMubGlzdEl0ZW0gd291bGQgcmV0dXJuIGl0cyBJRCAobnVtYmVyKVxuICAgKiBgYGBcbiAgICogVGhpcyBtZXRob2QgaW50ZXJuYWxseSB1c2VzIGBTdHlsZVNoZWV0UmVnaXN0cnkuZ2V0U3R5bGVCeUlEKHN0eWxlKWBcbiAgICogdG8gcmVzb2x2ZSBzdHlsZSBvYmplY3RzIHJlcHJlc2VudGVkIGJ5IElEcy4gVGh1cywgYW4gYXJyYXkgb2Ygc3R5bGVcbiAgICogb2JqZWN0cyAoaW5zdGFuY2VzIG9mIFN0eWxlU2hlZXQuY3JlYXRlKSwgYXJlIGluZGl2aWR1YWxseSByZXNvbHZlZCB0byxcbiAgICogdGhlaXIgcmVzcGVjdGl2ZSBvYmplY3RzLCBtZXJnZWQgYXMgb25lIGFuZCB0aGVuIHJldHVybmVkLiBUaGlzIGFsc28gZXhwbGFpbnNcbiAgICogdGhlIGFsdGVybmF0aXZlIHVzZS5cbiAgICovXG4gIGZsYXR0ZW4sXG5cbiAgLyoqXG4gICAqIFdBUk5JTkc6IEVYUEVSSU1FTlRBTC4gQnJlYWtpbmcgY2hhbmdlcyB3aWxsIHByb2JhYmx5IGhhcHBlbiBhIGxvdCBhbmQgd2lsbFxuICAgKiBub3QgYmUgcmVsaWFibHkgYW5ub3VuY2VkLiBUaGUgd2hvbGUgdGhpbmcgbWlnaHQgYmUgZGVsZXRlZCwgd2hvIGtub3dzPyBVc2VcbiAgICogYXQgeW91ciBvd24gcmlzay5cbiAgICpcbiAgICogU2V0cyBhIGZ1bmN0aW9uIHRvIHVzZSB0byBwcmUtcHJvY2VzcyBhIHN0eWxlIHByb3BlcnR5IHZhbHVlLiBUaGlzIGlzIHVzZWRcbiAgICogaW50ZXJuYWxseSB0byBwcm9jZXNzIGNvbG9yIGFuZCB0cmFuc2Zvcm0gdmFsdWVzLiBZb3Ugc2hvdWxkIG5vdCB1c2UgdGhpc1xuICAgKiB1bmxlc3MgeW91IHJlYWxseSBrbm93IHdoYXQgeW91IGFyZSBkb2luZyBhbmQgaGF2ZSBleGhhdXN0ZWQgb3RoZXIgb3B0aW9ucy5cbiAgICovXG4gIHNldFN0eWxlQXR0cmlidXRlUHJlcHJvY2Vzc29yKFxuICAgIHByb3BlcnR5OiBzdHJpbmcsXG4gICAgcHJvY2VzczogKG5leHRQcm9wOiBtaXhlZCkgPT4gbWl4ZWQsXG4gICkge1xuICAgIGxldCB2YWx1ZTtcblxuICAgIGlmICh0eXBlb2YgUmVhY3ROYXRpdmVTdHlsZUF0dHJpYnV0ZXNbcHJvcGVydHldID09PSAnc3RyaW5nJykge1xuICAgICAgdmFsdWUgPSB7fTtcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiBSZWFjdE5hdGl2ZVN0eWxlQXR0cmlidXRlc1twcm9wZXJ0eV0gPT09ICdvYmplY3QnKSB7XG4gICAgICB2YWx1ZSA9IFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc29sZS5lcnJvcihgJHtwcm9wZXJ0eX0gaXMgbm90IGEgdmFsaWQgc3R5bGUgYXR0cmlidXRlYCk7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKF9fREVWX18gJiYgdHlwZW9mIHZhbHVlLnByb2Nlc3MgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGNvbnNvbGUud2FybihgT3ZlcndyaXRpbmcgJHtwcm9wZXJ0eX0gc3R5bGUgYXR0cmlidXRlIHByZXByb2Nlc3NvcmApO1xuICAgIH1cblxuICAgIFJlYWN0TmF0aXZlU3R5bGVBdHRyaWJ1dGVzW3Byb3BlcnR5XSA9IHsuLi52YWx1ZSwgcHJvY2Vzc307XG4gIH0sXG5cbiAgLyoqXG4gICAqIENyZWF0ZXMgYSBTdHlsZVNoZWV0IHN0eWxlIHJlZmVyZW5jZSBmcm9tIHRoZSBnaXZlbiBvYmplY3QuXG4gICAqL1xuICBjcmVhdGU8K1M6IF9fX19TdHlsZXNfSW50ZXJuYWw+KG9iajogUyk6ICRPYmpNYXA8UywgKE9iamVjdCkgPT4gYW55PiB7XG4gICAgLy8gVE9ETzogVGhpcyBzaG91bGQgcmV0dXJuIFMgYXMgdGhlIHJldHVybiB0eXBlLiBCdXQgZmlyc3QsXG4gICAgLy8gd2UgbmVlZCB0byBjb2RlbW9kIGFsbCB0aGUgY2FsbHNpdGVzIHRoYXQgYXJlIHR5cGluZyB0aGlzXG4gICAgLy8gcmV0dXJuIHZhbHVlIGFzIGEgbnVtYmVyIChldmVuIHRob3VnaCBpdCB3YXMgb3BhcXVlKS5cbiAgICBpZiAoX19ERVZfXykge1xuICAgICAgZm9yIChjb25zdCBrZXkgaW4gb2JqKSB7XG4gICAgICAgIFN0eWxlU2hlZXRWYWxpZGF0aW9uLnZhbGlkYXRlU3R5bGUoa2V5LCBvYmopO1xuICAgICAgICBpZiAob2JqW2tleV0pIHtcbiAgICAgICAgICBPYmplY3QuZnJlZXplKG9ialtrZXldKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gb2JqO1xuICB9LFxufTtcbiJdfQ==