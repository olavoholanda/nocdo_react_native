{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/objectSpread","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"expo-constants","data":{"isAsync":false}},{"name":"qs","data":{"isAsync":false}},{"name":"./Linking","data":{"isAsync":false}},{"name":"./WebBrowser/WebBrowser","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _objectSpread2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/objectSpread\"));\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _expoConstants = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"expo-constants\"));\n\n  var _qs = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"qs\"));\n\n  var _Linking = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[5], \"./Linking\"));\n\n  var _WebBrowser = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[6], \"./WebBrowser/WebBrowser\"));\n\n  var BASE_URL = \"https://auth.expo.io\";\n  var _authLock = false;\n\n  function startAsync(options) {\n    var returnUrl, authUrl, startUrl, result, _parseUrl, params, errorCode;\n\n    return _regenerator.default.async(function startAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            returnUrl = options.returnUrl || getDefaultReturnUrl();\n            authUrl = options.authUrl;\n            startUrl = getStartUrl(authUrl, returnUrl);\n\n            if (authUrl) {\n              _context.next = 5;\n              break;\n            }\n\n            throw new Error('No authUrl provided to AuthSession.startAsync. An authUrl is required -- it points to the page where the user will be able to sign in.');\n\n          case 5:\n            if (!_authLock) {\n              _context.next = 8;\n              break;\n            }\n\n            if (__DEV__) {\n              console.warn('Attempted to call AuthSession.startAsync multiple times while already active. Only one AuthSession can be active at any given time.');\n            }\n\n            return _context.abrupt(\"return\", {\n              type: 'locked'\n            });\n\n          case 8:\n            _authLock = true;\n            _context.prev = 9;\n            _context.next = 12;\n            return _regenerator.default.awrap(_openWebBrowserAsync(startUrl, returnUrl));\n\n          case 12:\n            result = _context.sent;\n\n          case 13:\n            _context.prev = 13;\n            _authLock = false;\n            return _context.finish(13);\n\n          case 16:\n            if (result) {\n              _context.next = 18;\n              break;\n            }\n\n            throw new Error('Unexpected missing AuthSession result');\n\n          case 18:\n            if (result.url) {\n              _context.next = 24;\n              break;\n            }\n\n            if (!result.type) {\n              _context.next = 23;\n              break;\n            }\n\n            return _context.abrupt(\"return\", result);\n\n          case 23:\n            throw new Error('Unexpected AuthSession result with missing type');\n\n          case 24:\n            _parseUrl = parseUrl(result.url), params = _parseUrl.params, errorCode = _parseUrl.errorCode;\n            return _context.abrupt(\"return\", {\n              type: errorCode ? 'error' : 'success',\n              params: params,\n              errorCode: errorCode,\n              url: result.url\n            });\n\n          case 26:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this, [[9,, 13, 16]]);\n  }\n\n  function dismiss() {\n    _WebBrowser.default.dismissAuthSession();\n  }\n\n  function _openWebBrowserAsync(startUrl, returnUrl) {\n    var result;\n    return _regenerator.default.async(function _openWebBrowserAsync$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regenerator.default.awrap(_WebBrowser.default.openAuthSessionAsync(startUrl, returnUrl));\n\n          case 2:\n            result = _context2.sent;\n\n            if (!(result.type === 'cancel' || result.type === 'dismiss')) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", {\n              type: result.type\n            });\n\n          case 5:\n            return _context2.abrupt(\"return\", result);\n\n          case 6:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, this);\n  }\n\n  function getStartUrl(authUrl, returnUrl) {\n    var queryString = _qs.default.stringify({\n      authUrl: authUrl,\n      returnUrl: returnUrl\n    });\n\n    return getRedirectUrl() + \"/start?\" + queryString;\n  }\n\n  function getRedirectUrl() {\n    var redirectUrl = BASE_URL + \"/\" + _expoConstants.default.manifest.id;\n\n    if (__DEV__) {\n      _warnIfAnonymous(_expoConstants.default.manifest.id, redirectUrl);\n    }\n\n    return redirectUrl;\n  }\n\n  function getDefaultReturnUrl() {\n    return _Linking.default.makeUrl('expo-auth-session');\n  }\n\n  function parseUrl(url) {\n    var parts = url.split('#');\n    var hash = parts[1];\n    var partsWithoutHash = parts[0].split('?');\n    var queryString = partsWithoutHash[partsWithoutHash.length - 1];\n\n    var parsedSearch = _qs.default.parse(queryString);\n\n    var errorCode = parsedSearch.errorCode;\n    delete parsedSearch.errorCode;\n    var parsedHash = {};\n\n    if (parts[1]) {\n      parsedHash = _qs.default.parse(hash);\n    }\n\n    var params = (0, _objectSpread2.default)({}, parsedSearch, parsedHash);\n    return {\n      errorCode: errorCode,\n      params: params\n    };\n  }\n\n  function _warnIfAnonymous(id, url) {\n    if (id.startsWith('@anonymous/')) {\n      console.warn(\"You are not currently signed in to Expo on your development machine. As a result, the redirect URL for AuthSession will be \\\"\" + url + \"\\\". If you are using an OAuth provider that requires whitelisting redirect URLs, we recommend that you do not whitelist this URL -- instead, you should sign in to Expo to acquired a unique redirect URL. Additionally, if you do decide to publish this app using Expo, you will need to register an account to do it.\");\n    }\n  }\n\n  var _default = {\n    dismiss: dismiss,\n    getRedirectUrl: getRedirectUrl,\n    getStartUrl: getStartUrl,\n    getDefaultReturnUrl: getDefaultReturnUrl,\n\n    get getRedirectUri() {\n      console.warn('Use AuthSession.getRedirectUrl rather than AuthSession.getRedirectUri (Url instead of Uri)');\n      return getRedirectUrl;\n    },\n\n    startAsync: startAsync\n  };\n  exports.default = _default;\n});","map":[[13,0,1,0],[15,0,2,0],[17,0,3,0],[19,0,4,0],[21,0,5,0],[21,6,5,6,"BASE_URL"],[21,14,5,14],[21,39,5,0],[22,0,6,0],[22,6,6,4,"_authLock"],[22,15,6,13],[22,18,6,16],[22,23,6,0],[24,0,7,0],[24,11,7,15,"startAsync"],[24,21,7,0],[24,22,7,26,"options"],[24,29,7,0],[25,0,7,0],[27,0,7,0],[28,0,7,0],[29,0,7,0],[30,0,7,0],[31,0,8,10,"returnUrl"],[31,12,8,10,"returnUrl"],[31,21,7,0],[31,24,8,22,"options"],[31,31,8,29],[31,32,8,30,"returnUrl"],[31,41,8,22],[31,45,8,43,"getDefaultReturnUrl"],[31,64,8,62],[31,66,7,0],[32,0,9,10,"authUrl"],[32,12,9,10,"authUrl"],[32,19,7,0],[32,22,9,20,"options"],[32,29,9,27],[32,30,9,28,"authUrl"],[32,37,7,0],[33,0,10,10,"startUrl"],[33,12,10,10,"startUrl"],[33,20,7,0],[33,23,10,21,"getStartUrl"],[33,34,10,32],[33,35,10,33,"authUrl"],[33,42,10,32],[33,44,10,42,"returnUrl"],[33,53,10,32],[33,54,7,0],[35,0,7,0],[35,16,12,9,"authUrl"],[35,23,7,0],[36,0,7,0],[37,0,7,0],[38,0,7,0],[40,0,7,0],[40,18,13,14],[40,22,13,18,"Error"],[40,27,13,14],[40,28,13,24],[40,164,13,14],[40,165,7,0],[42,0,7,0],[43,0,7,0],[43,17,17,8,"_authLock"],[43,26,7,0],[44,0,7,0],[45,0,7,0],[46,0,7,0],[48,0,18,8],[48,16,18,12,"__DEV__"],[48,23,18,8],[48,25,18,21],[49,0,19,12,"console"],[49,14,19,12,"console"],[49,21,19,19],[49,22,19,20,"warn"],[49,26,19,12],[49,27,19,25],[49,160,19,12],[50,0,20,9],[52,0,7,0],[52,45,21,15],[53,0,21,17,"type"],[53,14,21,17,"type"],[53,18,21,21],[53,20,21,23],[54,0,21,15],[54,13,7,0],[56,0,7,0],[57,0,24,4,"_authLock"],[57,12,24,4,"_authLock"],[57,21,24,13],[57,24,24,16],[57,28,24,4],[58,0,7,0],[59,0,7,0],[60,0,7,0],[60,46,27,23,"_openWebBrowserAsync"],[60,66,27,43],[60,67,27,44,"startUrl"],[60,75,27,43],[60,77,27,54,"returnUrl"],[60,86,27,43],[60,87,7,0],[62,0,7,0],[63,0,27,8,"result"],[63,12,27,8,"result"],[63,18,7,0],[65,0,7,0],[66,0,7,0],[67,0,31,8,"_authLock"],[67,12,31,8,"_authLock"],[67,21,31,17],[67,24,31,20],[67,29,31,8],[68,0,7,0],[70,0,7,0],[71,0,7,0],[71,16,34,9,"result"],[71,22,7,0],[72,0,7,0],[73,0,7,0],[74,0,7,0],[76,0,7,0],[76,18,35,14],[76,22,35,18,"Error"],[76,27,35,14],[76,28,35,24],[76,67,35,14],[76,68,7,0],[78,0,7,0],[79,0,7,0],[79,16,37,9,"result"],[79,22,37,15],[79,23,37,16,"url"],[79,26,7,0],[80,0,7,0],[81,0,7,0],[82,0,7,0],[84,0,7,0],[84,17,38,12,"result"],[84,23,38,18],[84,24,38,19,"type"],[84,28,7,0],[85,0,7,0],[86,0,7,0],[87,0,7,0],[89,0,7,0],[89,45,39,19,"result"],[89,51,7,0],[91,0,7,0],[92,0,7,0],[92,18,42,18],[92,22,42,22,"Error"],[92,27,42,18],[92,28,42,28],[92,77,42,18],[92,78,7,0],[94,0,7,0],[95,0,7,0],[95,24,45,32,"parseUrl"],[95,32,45,40],[95,33,45,41,"result"],[95,39,45,47],[95,40,45,48,"url"],[95,43,45,40],[95,44,7,0],[95,46,45,10,"params"],[95,52,7,0],[95,65,45,10,"params"],[95,71,7,0],[95,73,45,18,"errorCode"],[95,82,7,0],[95,95,45,18,"errorCode"],[95,104,7,0],[96,0,7,0],[96,45,46,11],[97,0,47,8,"type"],[97,14,47,8,"type"],[97,18,47,12],[97,20,47,14,"errorCode"],[97,29,47,23],[97,32,47,26],[97,39,47,23],[97,42,47,36],[97,51,46,11],[98,0,48,8,"params"],[98,14,48,8,"params"],[98,20,48,14],[98,22,48,8,"params"],[98,28,46,11],[99,0,49,8,"errorCode"],[99,14,49,8,"errorCode"],[99,23,49,17],[99,25,49,8,"errorCode"],[99,34,46,11],[100,0,50,8,"url"],[100,14,50,8,"url"],[100,17,50,11],[100,19,50,13,"result"],[100,25,50,19],[100,26,50,20,"url"],[101,0,46,11],[101,13,7,0],[103,0,7,0],[104,0,7,0],[105,0,7,0],[106,0,7,0],[107,0,7,0],[108,0,7,0],[109,0,7,0],[111,0,53,0],[111,11,53,9,"dismiss"],[111,18,53,0],[111,21,53,19],[112,0,54,4,"WebBrowser"],[112,24,54,15,"dismissAuthSession"],[112,42,54,4],[113,0,55,1],[115,0,56,0],[115,11,56,15,"_openWebBrowserAsync"],[115,31,56,0],[115,32,56,36,"startUrl"],[115,40,56,0],[115,42,56,46,"returnUrl"],[115,51,56,0],[116,0,56,0],[117,0,56,0],[118,0,56,0],[119,0,56,0],[120,0,56,0],[121,0,56,0],[122,0,56,0],[122,46,58,23,"WebBrowser"],[122,66,58,34,"openAuthSessionAsync"],[122,86,58,23],[122,87,58,55,"startUrl"],[122,95,58,23],[122,97,58,65,"returnUrl"],[122,106,58,23],[122,107,56,0],[124,0,56,0],[125,0,58,8,"result"],[125,12,58,8,"result"],[125,18,56,0],[127,0,56,0],[127,18,59,8,"result"],[127,24,59,14],[127,25,59,15,"type"],[127,29,59,8],[127,34,59,24],[127,42,59,8],[127,46,59,36,"result"],[127,52,59,42],[127,53,59,43,"type"],[127,57,59,36],[127,62,59,52],[127,71,56,0],[128,0,56,0],[129,0,56,0],[130,0,56,0],[132,0,56,0],[132,46,60,15],[133,0,60,17,"type"],[133,14,60,17,"type"],[133,18,60,21],[133,20,60,23,"result"],[133,26,60,29],[133,27,60,30,"type"],[134,0,60,15],[134,13,56,0],[136,0,56,0],[137,0,56,0],[137,46,62,11,"result"],[137,52,56,0],[139,0,56,0],[140,0,56,0],[141,0,56,0],[142,0,56,0],[143,0,56,0],[144,0,56,0],[145,0,56,0],[147,0,64,0],[147,11,64,9,"getStartUrl"],[147,22,64,0],[147,23,64,21,"authUrl"],[147,30,64,0],[147,32,64,30,"returnUrl"],[147,41,64,0],[147,43,64,41],[148,0,65,4],[148,8,65,8,"queryString"],[148,19,65,19],[148,22,65,22,"qs"],[148,34,65,25,"stringify"],[148,43,65,22],[148,44,65,35],[149,0,66,8,"authUrl"],[149,6,66,8,"authUrl"],[149,13,66,15],[149,15,66,8,"authUrl"],[149,22,65,35],[150,0,67,8,"returnUrl"],[150,6,67,8,"returnUrl"],[150,15,67,17],[150,17,67,8,"returnUrl"],[151,0,65,35],[151,5,65,22],[151,6,65,4],[153,0,69,4],[153,11,69,14,"getRedirectUrl"],[153,25,69,28],[153,27,69,4],[153,42,69,40,"queryString"],[153,53,69,4],[154,0,70,1],[156,0,71,0],[156,11,71,9,"getRedirectUrl"],[156,25,71,0],[156,28,71,26],[157,0,72,4],[157,8,72,10,"redirectUrl"],[157,19,72,21],[157,22,72,27,"BASE_URL"],[157,30,72,21],[157,39,72,39,"Constants"],[157,62,72,49,"manifest"],[157,70,72,39],[157,71,72,58,"id"],[157,73,72,4],[159,0,73,4],[159,8,73,8,"__DEV__"],[159,15,73,4],[159,17,73,17],[160,0,74,8,"_warnIfAnonymous"],[160,6,74,8,"_warnIfAnonymous"],[160,22,74,24],[160,23,74,25,"Constants"],[160,46,74,35,"manifest"],[160,54,74,25],[160,55,74,44,"id"],[160,57,74,24],[160,59,74,48,"redirectUrl"],[160,70,74,24],[160,71,74,8],[161,0,75,5],[163,0,76,4],[163,11,76,11,"redirectUrl"],[163,22,76,4],[164,0,77,1],[166,0,78,0],[166,11,78,9,"getDefaultReturnUrl"],[166,30,78,0],[166,33,78,31],[167,0,79,4],[167,11,79,11,"Linking"],[167,28,79,19,"makeUrl"],[167,35,79,11],[167,36,79,27],[167,55,79,11],[167,56,79,4],[168,0,80,1],[170,0,81,0],[170,11,81,9,"parseUrl"],[170,19,81,0],[170,20,81,18,"url"],[170,23,81,0],[170,25,81,23],[171,0,82,4],[171,8,82,8,"parts"],[171,13,82,13],[171,16,82,16,"url"],[171,19,82,19],[171,20,82,20,"split"],[171,25,82,16],[171,26,82,26],[171,29,82,16],[171,30,82,4],[172,0,83,4],[172,8,83,8,"hash"],[172,12,83,12],[172,15,83,15,"parts"],[172,20,83,20],[172,21,83,21],[172,22,83,20],[172,23,83,4],[173,0,84,4],[173,8,84,8,"partsWithoutHash"],[173,24,84,24],[173,27,84,27,"parts"],[173,32,84,32],[173,33,84,33],[173,34,84,32],[173,35,84,27],[173,36,84,36,"split"],[173,41,84,27],[173,42,84,42],[173,45,84,27],[173,46,84,4],[174,0,85,4],[174,8,85,8,"queryString"],[174,19,85,19],[174,22,85,22,"partsWithoutHash"],[174,38,85,38],[174,39,85,39,"partsWithoutHash"],[174,55,85,55],[174,56,85,56,"length"],[174,62,85,39],[174,65,85,65],[174,66,85,38],[174,67,85,4],[176,0,87,4],[176,8,87,8,"parsedSearch"],[176,20,87,20],[176,23,87,23,"qs"],[176,35,87,26,"parse"],[176,40,87,23],[176,41,87,32,"queryString"],[176,52,87,23],[176,53,87,4],[178,0,81,23],[178,8,89,10,"errorCode"],[178,17,81,23],[178,20,89,24,"parsedSearch"],[178,32,81,23],[178,33,89,10,"errorCode"],[178,42,81,23],[179,0,90,4],[179,11,90,11,"parsedSearch"],[179,23,90,23],[179,24,90,24,"errorCode"],[179,33,90,4],[180,0,92,4],[180,8,92,8,"parsedHash"],[180,18,92,18],[180,21,92,21],[180,23,92,4],[182,0,93,4],[182,8,93,8,"parts"],[182,13,93,13],[182,14,93,14],[182,15,93,13],[182,16,93,4],[182,18,93,18],[183,0,94,8,"parsedHash"],[183,6,94,8,"parsedHash"],[183,16,94,18],[183,19,94,21,"qs"],[183,31,94,24,"parse"],[183,36,94,21],[183,37,94,30,"hash"],[183,41,94,21],[183,42,94,8],[184,0,95,5],[186,0,97,4],[186,8,97,8,"params"],[186,14,97,14],[186,49,98,11,"parsedSearch"],[186,61,97,14],[186,63,99,11,"parsedHash"],[186,73,97,14],[186,74,97,4],[187,0,101,4],[187,11,101,11],[188,0,102,8,"errorCode"],[188,6,102,8,"errorCode"],[188,15,102,17],[188,17,102,8,"errorCode"],[188,26,101,11],[189,0,103,8,"params"],[189,6,103,8,"params"],[189,12,103,14],[189,14,103,8,"params"],[190,0,101,11],[190,5,101,4],[191,0,105,1],[193,0,106,0],[193,11,106,9,"_warnIfAnonymous"],[193,27,106,0],[193,28,106,26,"id"],[193,30,106,0],[193,32,106,30,"url"],[193,35,106,0],[193,37,106,35],[194,0,107,4],[194,8,107,8,"id"],[194,10,107,10],[194,11,107,11,"startsWith"],[194,21,107,8],[194,22,107,22],[194,35,107,8],[194,36,107,4],[194,38,107,38],[195,0,108,8,"console"],[195,6,108,8,"console"],[195,13,108,15],[195,14,108,16,"warn"],[195,18,108,8],[195,149,108,148,"url"],[195,152,108,8],[196,0,109,5],[197,0,110,1],[199,17,111,15],[200,0,112,4,"dismiss"],[200,4,112,4,"dismiss"],[200,11,112,11],[200,13,112,4,"dismiss"],[200,20,111,15],[201,0,113,4,"getRedirectUrl"],[201,4,113,4,"getRedirectUrl"],[201,18,113,18],[201,20,113,4,"getRedirectUrl"],[201,34,111,15],[202,0,114,4,"getStartUrl"],[202,4,114,4,"getStartUrl"],[202,15,114,15],[202,17,114,4,"getStartUrl"],[202,28,111,15],[203,0,115,4,"getDefaultReturnUrl"],[203,4,115,4,"getDefaultReturnUrl"],[203,23,115,23],[203,25,115,4,"getDefaultReturnUrl"],[203,44,111,15],[205,0,116,4],[205,8,116,8,"getRedirectUri"],[205,22,116,4],[205,25,116,25],[206,0,117,8,"console"],[206,6,117,8,"console"],[206,13,117,15],[206,14,117,16,"warn"],[206,18,117,8],[206,19,117,21],[206,111,117,8],[207,0,118,8],[207,13,118,15,"getRedirectUrl"],[207,27,118,8],[208,0,119,5],[208,5,111,15],[210,0,120,4,"startAsync"],[210,4,120,4,"startAsync"],[210,14,120,14],[210,16,120,4,"startAsync"],[211,0,111,15],[211,3]]},"type":"js/module"}]}