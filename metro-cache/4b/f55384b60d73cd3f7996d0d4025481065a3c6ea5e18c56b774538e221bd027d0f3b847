{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/objectSpread","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"../ReanimatedModule","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.default = void 0;\n\n  var _objectSpread2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/objectSpread\"));\n\n  var _classCallCheck2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/classCallCheck\"));\n\n  var _createClass2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/createClass\"));\n\n  var _ReanimatedModule = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"../ReanimatedModule\"));\n\n  var UPDATED_NODES = [];\n  var loopID = 1;\n  var propUpdatesEnqueued = null;\n\n  function sanitizeConfig(config) {\n    for (var key in config) {\n      var value = config[key];\n\n      if (value instanceof AnimatedNode) {\n        config[key] = value.__nodeID;\n      }\n    }\n\n    return config;\n  }\n\n  function runPropUpdates() {\n    var visitedNodes = new Set();\n\n    var findAndUpdateNodes = function findAndUpdateNodes(node) {\n      if (visitedNodes.has(node)) {\n        return;\n      } else {\n        visitedNodes.add(node);\n      }\n\n      if (typeof node.update === 'function') {\n        node.update();\n      } else {\n        node.__getChildren().forEach(findAndUpdateNodes);\n      }\n    };\n\n    for (var i = 0; i < UPDATED_NODES.length; i++) {\n      var node = UPDATED_NODES[i];\n      findAndUpdateNodes(node);\n    }\n\n    UPDATED_NODES.length = 0;\n    propUpdatesEnqueued = null;\n    loopID += 1;\n  }\n\n  var nodeCount = 0;\n\n  var AnimatedNode = function () {\n    function AnimatedNode(nodeConfig, inputNodes) {\n      (0, _classCallCheck2.default)(this, AnimatedNode);\n      this.__lastLoopID = 0;\n      this.__memoizedValue = null;\n      this.__children = [];\n      this.__nodeID = ++nodeCount;\n      this.__nodeConfig = sanitizeConfig(nodeConfig);\n      this.__initialized = false;\n      this.__inputNodes = inputNodes && inputNodes.filter(function (node) {\n        return node instanceof AnimatedNode;\n      });\n    }\n\n    (0, _createClass2.default)(AnimatedNode, [{\n      key: \"__attach\",\n      value: function __attach() {\n        var _this = this;\n\n        this.__nativeInitialize();\n\n        this.__inputNodes && this.__inputNodes.forEach(function (node) {\n          return node.__addChild(_this);\n        });\n      }\n    }, {\n      key: \"__detach\",\n      value: function __detach() {\n        var _this2 = this;\n\n        this.__inputNodes && this.__inputNodes.forEach(function (node) {\n          return node.__removeChild(_this2);\n        });\n\n        this.__nativeTearDown();\n      }\n    }, {\n      key: \"__getValue\",\n      value: function __getValue() {\n        if (this.__lastLoopID < loopID) {\n          this.__lastLoopID = loopID;\n          return this.__memoizedValue = this.__onEvaluate();\n        }\n\n        return this.__memoizedValue;\n      }\n    }, {\n      key: \"__forceUpdateCache\",\n      value: function __forceUpdateCache(newValue) {\n        this.__memoizedValue = newValue;\n\n        this.__markUpdated();\n      }\n    }, {\n      key: \"__dangerouslyRescheduleEvaluate\",\n      value: function __dangerouslyRescheduleEvaluate() {\n        this.__lastLoopID = 0;\n\n        this.__markUpdated();\n      }\n    }, {\n      key: \"__markUpdated\",\n      value: function __markUpdated() {\n        UPDATED_NODES.push(this);\n\n        if (!propUpdatesEnqueued) {\n          propUpdatesEnqueued = setImmediate(runPropUpdates);\n        }\n      }\n    }, {\n      key: \"__nativeInitialize\",\n      value: function __nativeInitialize() {\n        if (!this.__initialized) {\n          _ReanimatedModule.default.createNode(this.__nodeID, (0, _objectSpread2.default)({}, this.__nodeConfig));\n\n          this.__initialized = true;\n        }\n      }\n    }, {\n      key: \"__nativeTearDown\",\n      value: function __nativeTearDown() {\n        if (this.__initialized) {\n          _ReanimatedModule.default.dropNode(this.__nodeID);\n\n          this.__initialized = false;\n        }\n      }\n    }, {\n      key: \"isNativelyInitialized\",\n      value: function isNativelyInitialized() {\n        return this.__initialized;\n      }\n    }, {\n      key: \"__onEvaluate\",\n      value: function __onEvaluate() {\n        throw new Error('Missing implementation of onEvaluate');\n      }\n    }, {\n      key: \"__getProps\",\n      value: function __getProps() {\n        return this.__getValue();\n      }\n    }, {\n      key: \"__getChildren\",\n      value: function __getChildren() {\n        return this.__children;\n      }\n    }, {\n      key: \"__addChild\",\n      value: function __addChild(child) {\n        if (this.__children.length === 0) {\n          this.__attach();\n        }\n\n        this.__children.push(child);\n\n        child.__nativeInitialize();\n\n        _ReanimatedModule.default.connectNodes(this.__nodeID, child.__nodeID);\n      }\n    }, {\n      key: \"__removeChild\",\n      value: function __removeChild(child) {\n        var index = this.__children.indexOf(child);\n\n        if (index === -1) {\n          console.warn(\"Trying to remove a child that doesn't exist\");\n          return;\n        }\n\n        _ReanimatedModule.default.disconnectNodes(this.__nodeID, child.__nodeID);\n\n        this.__children.splice(index, 1);\n\n        if (this.__children.length === 0) {\n          this.__detach();\n        }\n      }\n    }, {\n      key: \"_connectAnimatedView\",\n      value: function _connectAnimatedView(nativeViewTag) {\n        _ReanimatedModule.default.connectNodeToView(this.__nodeID, nativeViewTag);\n      }\n    }, {\n      key: \"_disconnectAnimatedView\",\n      value: function _disconnectAnimatedView(nativeViewTag) {\n        _ReanimatedModule.default.disconnectNodeFromView(this.__nodeID, nativeViewTag);\n      }\n    }]);\n    return AnimatedNode;\n  }();\n\n  exports.default = AnimatedNode;\n});","map":[[15,0,1,0],[17,0,3,0],[17,6,3,6,"UPDATED_NODES"],[17,19,3,19],[17,22,3,22],[17,24,3,0],[18,0,5,0],[18,6,5,4,"loopID"],[18,12,5,10],[18,15,5,13],[18,16,5,0],[19,0,6,0],[19,6,6,4,"propUpdatesEnqueued"],[19,25,6,23],[19,28,6,26],[19,32,6,0],[21,0,8,0],[21,11,8,9,"sanitizeConfig"],[21,25,8,0],[21,26,8,24,"config"],[21,32,8,0],[21,34,8,32],[22,0,9,2],[22,9,9,7],[22,13,9,13,"key"],[22,16,9,2],[22,20,9,20,"config"],[22,26,9,2],[22,28,9,28],[23,0,10,4],[23,10,10,10,"value"],[23,15,10,15],[23,18,10,18,"config"],[23,24,10,24],[23,25,10,25,"key"],[23,28,10,24],[23,29,10,4],[25,0,11,4],[25,10,11,8,"value"],[25,15,11,13],[25,27,11,25,"AnimatedNode"],[25,39,11,4],[25,41,11,39],[26,0,12,6,"config"],[26,8,12,6,"config"],[26,14,12,12],[26,15,12,13,"key"],[26,18,12,12],[26,19,12,6],[26,22,12,20,"value"],[26,27,12,25],[26,28,12,26,"__nodeID"],[26,36,12,6],[27,0,13,5],[28,0,14,3],[30,0,15,2],[30,11,15,9,"config"],[30,17,15,2],[31,0,16,1],[33,0,18,0],[33,11,18,9,"runPropUpdates"],[33,25,18,0],[33,28,18,26],[34,0,19,2],[34,8,19,8,"visitedNodes"],[34,20,19,20],[34,23,19,23],[34,27,19,27,"Set"],[34,30,19,23],[34,32,19,2],[36,0,20,2],[36,8,20,8,"findAndUpdateNodes"],[36,26,20,26],[36,29,20,29],[36,38,20,8,"findAndUpdateNodes"],[36,56,20,29],[36,57,20,29,"node"],[36,61,20,33],[36,63,20,37],[37,0,21,4],[37,10,21,8,"visitedNodes"],[37,22,21,20],[37,23,21,21,"has"],[37,26,21,8],[37,27,21,25,"node"],[37,31,21,8],[37,32,21,4],[37,34,21,32],[38,0,22,6],[39,0,23,5],[39,7,21,4],[39,13,23,11],[40,0,24,6,"visitedNodes"],[40,8,24,6,"visitedNodes"],[40,20,24,18],[40,21,24,19,"add"],[40,24,24,6],[40,25,24,23,"node"],[40,29,24,6],[41,0,25,5],[43,0,26,4],[43,10,26,8],[43,17,26,15,"node"],[43,21,26,19],[43,22,26,20,"update"],[43,28,26,8],[43,33,26,31],[43,43,26,4],[43,45,26,43],[44,0,27,6,"node"],[44,8,27,6,"node"],[44,12,27,10],[44,13,27,11,"update"],[44,19,27,6],[45,0,28,5],[45,7,26,4],[45,13,28,11],[46,0,29,6,"node"],[46,8,29,6,"node"],[46,12,29,10],[46,13,29,11,"__getChildren"],[46,26,29,6],[46,29,29,27,"forEach"],[46,36,29,6],[46,37,29,35,"findAndUpdateNodes"],[46,55,29,6],[47,0,30,5],[48,0,31,3],[48,5,20,2],[50,0,32,2],[50,9,32,7],[50,13,32,11,"i"],[50,14,32,12],[50,17,32,15],[50,18,32,2],[50,20,32,18,"i"],[50,21,32,19],[50,24,32,22,"UPDATED_NODES"],[50,37,32,35],[50,38,32,36,"length"],[50,44,32,2],[50,46,32,44,"i"],[50,47,32,45],[50,49,32,2],[50,51,32,49],[51,0,33,4],[51,10,33,10,"node"],[51,14,33,14],[51,17,33,17,"UPDATED_NODES"],[51,30,33,30],[51,31,33,31,"i"],[51,32,33,30],[51,33,33,4],[52,0,34,4,"findAndUpdateNodes"],[52,6,34,4,"findAndUpdateNodes"],[52,24,34,22],[52,25,34,23,"node"],[52,29,34,22],[52,30,34,4],[53,0,35,3],[55,0,36,2,"UPDATED_NODES"],[55,4,36,2,"UPDATED_NODES"],[55,17,36,15],[55,18,36,16,"length"],[55,24,36,2],[55,27,36,25],[55,28,36,2],[56,0,37,2,"propUpdatesEnqueued"],[56,4,37,2,"propUpdatesEnqueued"],[56,23,37,21],[56,26,37,24],[56,30,37,2],[57,0,38,2,"loopID"],[57,4,38,2,"loopID"],[57,10,38,8],[57,14,38,12],[57,15,38,2],[58,0,39,1],[60,0,41,0],[60,6,41,4,"nodeCount"],[60,15,41,13],[60,18,41,16],[60,19,41,0],[62,6,43,21,"AnimatedNode"],[62,18],[63,0,44,2],[63,26,44,14,"nodeConfig"],[63,36,44,2],[63,38,44,26,"inputNodes"],[63,48,44,2],[63,50,44,38],[64,0,44,38],[65,0,44,38],[65,11,64,2,"__lastLoopID"],[65,23,44,38],[65,26,64,17],[65,27,44,38],[66,0,44,38],[66,11,65,2,"__memoizedValue"],[66,26,44,38],[66,29,65,20],[66,33,44,38],[67,0,44,38],[67,11,67,2,"__children"],[67,21,44,38],[67,24,67,15],[67,26,44,38],[68,0,45,4],[68,11,45,9,"__nodeID"],[68,19,45,4],[68,22,45,20],[68,24,45,22,"nodeCount"],[68,33,45,4],[69,0,46,4],[69,11,46,9,"__nodeConfig"],[69,23,46,4],[69,26,46,24,"sanitizeConfig"],[69,40,46,38],[69,41,46,39,"nodeConfig"],[69,51,46,38],[69,52,46,4],[70,0,47,4],[70,11,47,9,"__initialized"],[70,24,47,4],[70,27,47,25],[70,32,47,4],[71,0,48,4],[71,11,48,9,"__inputNodes"],[71,23,48,4],[71,26,49,6,"inputNodes"],[71,36,49,16],[71,40,49,20,"inputNodes"],[71,50,49,30],[71,51,49,31,"filter"],[71,57,49,20],[71,58,49,38],[71,68,49,38,"node"],[71,72,49,42],[72,0,49,42],[72,15,49,46,"node"],[72,19,49,50],[72,31,49,62,"AnimatedNode"],[72,43,49,42],[73,0,49,42],[73,7,49,20],[73,8,48,4],[74,0,50,3],[78,33,52,13],[79,0,52,13],[81,0,53,4],[81,13,53,9,"__nativeInitialize"],[81,31,53,4],[83,0,54,4],[83,13,54,9,"__inputNodes"],[83,25,54,4],[83,29,55,6],[83,34,55,11,"__inputNodes"],[83,46,55,6],[83,47,55,24,"forEach"],[83,54,55,6],[83,55,55,32],[83,65,55,32,"node"],[83,69,55,36],[84,0,55,36],[84,17,55,40,"node"],[84,21,55,44],[84,22,55,45,"__addChild"],[84,32,55,40],[84,33,55,56],[84,38,55,40],[84,39,55,36],[85,0,55,36],[85,9,55,6],[85,10,54,4],[86,0,56,3],[89,33,58,13],[90,0,58,13],[92,0,59,4],[92,13,59,9,"__inputNodes"],[92,25,59,4],[92,29,60,6],[92,34,60,11,"__inputNodes"],[92,46,60,6],[92,47,60,24,"forEach"],[92,54,60,6],[92,55,60,32],[92,65,60,32,"node"],[92,69,60,36],[93,0,60,36],[93,17,60,40,"node"],[93,21,60,44],[93,22,60,45,"__removeChild"],[93,35,60,40],[93,36,60,59],[93,42,60,40],[93,43,60,36],[94,0,60,36],[94,9,60,6],[94,10,59,4],[96,0,61,4],[96,13,61,9,"__nativeTearDown"],[96,29,61,4],[97,0,62,3],[100,35,69,15],[101,0,70,4],[101,12,70,8],[101,17,70,13,"__lastLoopID"],[101,29,70,8],[101,32,70,28,"loopID"],[101,38,70,4],[101,40,70,36],[102,0,71,6],[102,15,71,11,"__lastLoopID"],[102,27,71,6],[102,30,71,26,"loopID"],[102,36,71,6],[103,0,72,6],[103,17,72,14],[103,22,72,19,"__memoizedValue"],[103,37,72,14],[103,40,72,37],[103,45,72,42,"__onEvaluate"],[103,57,72,37],[103,59,72,6],[104,0,73,5],[106,0,74,4],[106,15,74,11],[106,20,74,16,"__memoizedValue"],[106,35,74,4],[107,0,75,3],[110,41,77,21,"newValue"],[110,49],[110,51,77,31],[111,0,78,4],[111,13,78,9,"__memoizedValue"],[111,28,78,4],[111,31,78,27,"newValue"],[111,39,78,4],[113,0,79,4],[113,13,79,9,"__markUpdated"],[113,26,79,4],[114,0,80,3],[117,56,82,36],[118,0,83,4],[118,13,83,9,"__lastLoopID"],[118,25,83,4],[118,28,83,24],[118,29,83,4],[120,0,84,4],[120,13,84,9,"__markUpdated"],[120,26,84,4],[121,0,85,3],[124,38,87,18],[125,0,88,4,"UPDATED_NODES"],[125,8,88,4,"UPDATED_NODES"],[125,21,88,17],[125,22,88,18,"push"],[125,26,88,4],[125,27,88,23],[125,31,88,4],[127,0,89,4],[127,12,89,8],[127,13,89,9,"propUpdatesEnqueued"],[127,32,89,4],[127,34,89,30],[128,0,90,6,"propUpdatesEnqueued"],[128,10,90,6,"propUpdatesEnqueued"],[128,29,90,25],[128,32,90,28,"setImmediate"],[128,44,90,40],[128,45,90,41,"runPropUpdates"],[128,59,90,40],[128,60,90,6],[129,0,91,5],[130,0,92,3],[133,43,94,23],[134,0,95,4],[134,12,95,8],[134,13,95,9],[134,18,95,14,"__initialized"],[134,31,95,4],[134,33,95,29],[135,0,96,6,"ReanimatedModule"],[135,36,96,23,"createNode"],[135,46,96,6],[135,47,96,34],[135,52,96,39,"__nodeID"],[135,60,96,6],[135,94,96,54],[135,99,96,59,"__nodeConfig"],[135,111,96,6],[137,0,97,6],[137,15,97,11,"__initialized"],[137,28,97,6],[137,31,97,27],[137,35,97,6],[138,0,98,5],[139,0,99,3],[142,41,101,21],[143,0,102,4],[143,12,102,8],[143,17,102,13,"__initialized"],[143,30,102,4],[143,32,102,28],[144,0,103,6,"ReanimatedModule"],[144,36,103,23,"dropNode"],[144,44,103,6],[144,45,103,32],[144,50,103,37,"__nodeID"],[144,58,103,6],[146,0,104,6],[146,15,104,11,"__initialized"],[146,28,104,6],[146,31,104,27],[146,36,104,6],[147,0,105,5],[148,0,106,3],[151,46,108,26],[152,0,109,4],[152,15,109,11],[152,20,109,16,"__initialized"],[152,33,109,4],[153,0,110,3],[156,37,112,17],[157,0,113,4],[157,14,113,10],[157,18,113,14,"Error"],[157,23,113,10],[157,24,113,20],[157,62,113,10],[157,63,113,4],[158,0,114,3],[161,35,116,15],[162,0,117,4],[162,15,117,11],[162,20,117,16,"__getValue"],[162,30,117,11],[162,32,117,4],[163,0,118,3],[166,38,120,18],[167,0,121,4],[167,15,121,11],[167,20,121,16,"__children"],[167,30,121,4],[168,0,122,3],[171,33,124,13,"child"],[171,38],[171,40,124,20],[172,0,125,4],[172,12,125,8],[172,17,125,13,"__children"],[172,27,125,8],[172,28,125,24,"length"],[172,34,125,8],[172,39,125,35],[172,40,125,4],[172,42,125,38],[173,0,126,6],[173,15,126,11,"__attach"],[173,23,126,6],[174,0,127,5],[176,0,128,4],[176,13,128,9,"__children"],[176,23,128,4],[176,24,128,20,"push"],[176,28,128,4],[176,29,128,25,"child"],[176,34,128,4],[178,0,129,4,"child"],[178,8,129,4,"child"],[178,13,129,9],[178,14,129,10,"__nativeInitialize"],[178,32,129,4],[180,0,131,4,"ReanimatedModule"],[180,34,131,21,"connectNodes"],[180,46,131,4],[180,47,131,34],[180,52,131,39,"__nodeID"],[180,60,131,4],[180,62,131,49,"child"],[180,67,131,54],[180,68,131,55,"__nodeID"],[180,76,131,4],[181,0,132,3],[184,36,134,16,"child"],[184,41],[184,43,134,23],[185,0,135,4],[185,12,135,10,"index"],[185,17,135,15],[185,20,135,18],[185,25,135,23,"__children"],[185,35,135,18],[185,36,135,34,"indexOf"],[185,43,135,18],[185,44,135,42,"child"],[185,49,135,18],[185,50,135,4],[187,0,136,4],[187,12,136,8,"index"],[187,17,136,13],[187,22,136,18],[187,23,136,19],[187,24,136,4],[187,26,136,22],[188,0,137,6,"console"],[188,10,137,6,"console"],[188,17,137,13],[188,18,137,14,"warn"],[188,22,137,6],[188,23,137,19],[188,68,137,6],[189,0,138,6],[190,0,139,5],[192,0,140,4,"ReanimatedModule"],[192,34,140,21,"disconnectNodes"],[192,49,140,4],[192,50,140,37],[192,55,140,42,"__nodeID"],[192,63,140,4],[192,65,140,52,"child"],[192,70,140,57],[192,71,140,58,"__nodeID"],[192,79,140,4],[194,0,142,4],[194,13,142,9,"__children"],[194,23,142,4],[194,24,142,20,"splice"],[194,30,142,4],[194,31,142,27,"index"],[194,36,142,4],[194,38,142,34],[194,39,142,4],[196,0,143,4],[196,12,143,8],[196,17,143,13,"__children"],[196,27,143,8],[196,28,143,24,"length"],[196,34,143,8],[196,39,143,35],[196,40,143,4],[196,42,143,38],[197,0,144,6],[197,15,144,11,"__detach"],[197,23,144,6],[198,0,145,5],[199,0,146,3],[202,43,148,23,"nativeViewTag"],[202,56],[202,58,148,38],[203,0,149,4,"ReanimatedModule"],[203,34,149,21,"connectNodeToView"],[203,51,149,4],[203,52,149,39],[203,57,149,44,"__nodeID"],[203,65,149,4],[203,67,149,54,"nativeViewTag"],[203,80,149,4],[204,0,150,3],[207,46,152,26,"nativeViewTag"],[207,59],[207,61,152,41],[208,0,153,4,"ReanimatedModule"],[208,34,153,21,"disconnectNodeFromView"],[208,56,153,4],[208,57,153,44],[208,62,153,49,"__nodeID"],[208,70,153,4],[208,72,153,59,"nativeViewTag"],[208,85,153,4],[209,0,154,3]]},"type":"js/module"}]}