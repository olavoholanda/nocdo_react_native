{"dependencies":[{"name":"@babel/runtime/helpers/interopRequireDefault","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/objectSpread","data":{"isAsync":false}},{"name":"@babel/runtime/regenerator","data":{"isAsync":false}},{"name":"expo-core","data":{"isAsync":false}},{"name":"invariant","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  var _interopRequireDefault = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/interopRequireDefault\");\n\n  Object.defineProperty(exports, \"__esModule\", {\n    value: true\n  });\n  exports.authAsync = authAsync;\n  exports.refreshAsync = refreshAsync;\n  exports.revokeAsync = revokeAsync;\n  exports.URLSchemes = exports.OAuthRedirect = void 0;\n\n  var _objectSpread2 = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/objectSpread\"));\n\n  var _regenerator = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/regenerator\"));\n\n  var _expoCore = _$$_REQUIRE(_dependencyMap[3], \"expo-core\");\n\n  var _invariant = _interopRequireDefault(_$$_REQUIRE(_dependencyMap[4], \"invariant\"));\n\n  var ExpoAppAuth = _expoCore.NativeModulesProxy.ExpoAppAuth;\n\n  var isValidString = function isValidString(s) {\n    return s && typeof s === 'string';\n  };\n\n  function isValidClientId(clientId) {\n    if (!isValidString(clientId)) throw new Error('Config error: clientId must be a string');\n  }\n\n  function isValidProps(_ref) {\n    var isRefresh = _ref.isRefresh,\n        issuer = _ref.issuer,\n        redirectUrl = _ref.redirectUrl,\n        clientId = _ref.clientId,\n        clientSecret = _ref.clientSecret,\n        scopes = _ref.scopes,\n        additionalParameters = _ref.additionalParameters,\n        serviceConfiguration = _ref.serviceConfiguration;\n\n    var _serviceConfigIsValid = serviceConfiguration && isValidString(serviceConfiguration.authorizationEndpoint) && isValidString(serviceConfiguration.tokenEndpoint);\n\n    if (!isValidString(issuer) && !_serviceConfigIsValid) throw new Error('Invalid you must provide either an issuer or a service endpoints');\n    if (!isValidString(redirectUrl)) throw new Error('Config error: redirectUrl must be a string');\n    isValidClientId(clientId);\n  }\n\n  function _executeAsync(props) {\n    return _regenerator.default.async(function _executeAsync$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (!props.redirectUrl) {\n              props.redirectUrl = ExpoAppAuth.OAuthRedirect + \":/oauthredirect\";\n            }\n\n            isValidProps(props);\n            _context.next = 4;\n            return _regenerator.default.awrap(ExpoAppAuth.executeAsync(props));\n\n          case 4:\n            return _context.abrupt(\"return\", _context.sent);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, null, this);\n  }\n\n  function authAsync(props) {\n    return _regenerator.default.async(function authAsync$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return _regenerator.default.awrap(_executeAsync(props));\n\n          case 2:\n            return _context2.abrupt(\"return\", _context2.sent);\n\n          case 3:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, null, this);\n  }\n\n  function refreshAsync(props, refreshToken) {\n    return _regenerator.default.async(function refreshAsync$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            if (refreshToken) {\n              _context3.next = 2;\n              break;\n            }\n\n            throw new Error('Please include the refreshToken');\n\n          case 2:\n            _context3.next = 4;\n            return _regenerator.default.awrap(_executeAsync((0, _objectSpread2.default)({\n              isRefresh: true,\n              refreshToken: refreshToken\n            }, props)));\n\n          case 4:\n            return _context3.abrupt(\"return\", _context3.sent);\n\n          case 5:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, null, this);\n  }\n\n  function revokeAsync(_ref2, _ref3) {\n    var clientId, issuer, serviceConfiguration, token, _ref3$isClientIdProvi, isClientIdProvided, revocationEndpoint, response, openidConfig, body, headers, results;\n\n    return _regenerator.default.async(function revokeAsync$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            clientId = _ref2.clientId, issuer = _ref2.issuer, serviceConfiguration = _ref2.serviceConfiguration;\n            token = _ref3.token, _ref3$isClientIdProvi = _ref3.isClientIdProvided, isClientIdProvided = _ref3$isClientIdProvi === void 0 ? false : _ref3$isClientIdProvi;\n\n            if (token) {\n              _context4.next = 4;\n              break;\n            }\n\n            throw new Error('Please include the token to revoke');\n\n          case 4:\n            isValidClientId(clientId);\n\n            if (!(!isValidString(issuer) || serviceConfiguration && !isValidString(serviceConfiguration.revocationEndpoint))) {\n              _context4.next = 7;\n              break;\n            }\n\n            throw new Error('Config error: you must provide either an issuer or a revocation endpoint');\n\n          case 7:\n            if (!(serviceConfiguration && serviceConfiguration.revocationEndpoint)) {\n              _context4.next = 11;\n              break;\n            }\n\n            revocationEndpoint = serviceConfiguration.revocationEndpoint;\n            _context4.next = 19;\n            break;\n\n          case 11:\n            _context4.next = 13;\n            return _regenerator.default.awrap(fetch(issuer + \"/.well-known/openid-configuration\"));\n\n          case 13:\n            response = _context4.sent;\n            _context4.next = 16;\n            return _regenerator.default.awrap(response.json());\n\n          case 16:\n            openidConfig = _context4.sent;\n            (0, _invariant.default)(openidConfig.revocation_endpoint, 'The OpenID config does not specify a revocation endpoint');\n            revocationEndpoint = openidConfig.revocation_endpoint;\n\n          case 19:\n            body = \"token=\" + token + (isClientIdProvided ? \"&client_id=\" + clientId : '');\n            headers = {\n              'Content-Type': 'application/x-www-form-urlencoded'\n            };\n            _context4.prev = 21;\n            _context4.next = 24;\n            return _regenerator.default.awrap(fetch(revocationEndpoint, {\n              method: 'POST',\n              headers: headers,\n              body: body\n            }));\n\n          case 24:\n            results = _context4.sent;\n            return _context4.abrupt(\"return\", results);\n\n          case 28:\n            _context4.prev = 28;\n            _context4.t0 = _context4[\"catch\"](21);\n            throw new Error(\"Failed to revoke token \" + _context4.t0.message);\n\n          case 31:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, null, this, [[21, 28]]);\n  }\n\n  var OAuthRedirect = ExpoAppAuth.OAuthRedirect,\n      URLSchemes = ExpoAppAuth.URLSchemes;\n  exports.URLSchemes = URLSchemes;\n  exports.OAuthRedirect = OAuthRedirect;\n});","map":[[16,0,2,0],[18,0,3,0],[20,6,4,8,"ExpoAppAuth"],[20,17],[20,20,4,24,"NativeModulesProxy"],[20,48],[20,49,4,8,"ExpoAppAuth"],[20,60],[22,0,133,0],[22,6,133,6,"isValidString"],[22,19,133,19],[22,22,133,22],[22,31,133,6,"isValidString"],[22,44,133,22],[22,45,133,23,"s"],[22,46,133,22],[23,0,133,22],[23,11,133,47,"s"],[23,12,133,48],[23,16,133,52],[23,23,133,59,"s"],[23,24,133,52],[23,29,133,65],[23,37,133,22],[24,0,133,22],[24,3,133,0],[26,0,135,0],[26,11,135,9,"isValidClientId"],[26,26,135,0],[26,27,135,25,"clientId"],[26,35,135,0],[26,37,135,50],[27,0,136,2],[27,8,136,6],[27,9,136,7,"isValidString"],[27,22,136,20],[27,23,136,21,"clientId"],[27,31,136,20],[27,32,136,2],[27,34,136,32],[27,40,136,38],[27,44,136,42,"Error"],[27,49,136,38],[27,50,136,48],[27,91,136,38],[27,92,136,32],[28,0,137,1],[30,0,139,0],[30,11,139,9,"isValidProps"],[30,23,139,0],[30,30,148,21],[31,0,148,21],[31,8,140,2,"isRefresh"],[31,17,148,21],[31,25,140,2,"isRefresh"],[31,34,148,21],[32,0,148,21],[32,8,141,2,"issuer"],[32,14,148,21],[32,22,141,2,"issuer"],[32,28,148,21],[33,0,148,21],[33,8,142,2,"redirectUrl"],[33,19,148,21],[33,27,142,2,"redirectUrl"],[33,38,148,21],[34,0,148,21],[34,8,143,2,"clientId"],[34,16,148,21],[34,24,143,2,"clientId"],[34,32,148,21],[35,0,148,21],[35,8,144,2,"clientSecret"],[35,20,148,21],[35,28,144,2,"clientSecret"],[35,40,148,21],[36,0,148,21],[36,8,145,2,"scopes"],[36,14,148,21],[36,22,145,2,"scopes"],[36,28,148,21],[37,0,148,21],[37,8,146,2,"additionalParameters"],[37,28,148,21],[37,36,146,2,"additionalParameters"],[37,56,148,21],[38,0,148,21],[38,8,147,2,"serviceConfiguration"],[38,28,148,21],[38,36,147,2,"serviceConfiguration"],[38,56,148,21],[40,0,149,2],[40,8,149,8,"_serviceConfigIsValid"],[40,29,149,29],[40,32,150,4,"serviceConfiguration"],[40,52,150,24],[40,56,151,4,"isValidString"],[40,69,151,17],[40,70,151,18,"serviceConfiguration"],[40,90,151,38],[40,91,151,39,"authorizationEndpoint"],[40,112,151,17],[40,113,150,4],[40,117,152,4,"isValidString"],[40,130,152,17],[40,131,152,18,"serviceConfiguration"],[40,151,152,38],[40,152,152,39,"tokenEndpoint"],[40,165,152,17],[40,166,149,2],[42,0,154,2],[42,8,154,6],[42,9,154,7,"isValidString"],[42,22,154,20],[42,23,154,21,"issuer"],[42,29,154,20],[42,30,154,6],[42,34,154,32],[42,35,154,33,"_serviceConfigIsValid"],[42,56,154,2],[42,58,155,4],[42,64,155,10],[42,68,155,14,"Error"],[42,73,155,10],[42,74,155,20],[42,140,155,10],[42,141,155,4],[43,0,156,2],[43,8,156,6],[43,9,156,7,"isValidString"],[43,22,156,20],[43,23,156,21,"redirectUrl"],[43,34,156,20],[43,35,156,2],[43,37,156,35],[43,43,156,41],[43,47,156,45,"Error"],[43,52,156,41],[43,53,156,51],[43,97,156,41],[43,98,156,35],[44,0,157,2,"isValidClientId"],[44,4,157,2,"isValidClientId"],[44,19,157,17],[44,20,157,18,"clientId"],[44,28,157,17],[44,29,157,2],[45,0,158,1],[47,0,160,0],[47,11,160,15,"_executeAsync"],[47,24,160,0],[47,25,160,29,"props"],[47,30,160,0],[48,0,160,0],[49,0,160,0],[50,0,160,0],[51,0,160,0],[52,0,161,2],[52,16,161,6],[52,17,161,7,"props"],[52,22,161,12],[52,23,161,13,"redirectUrl"],[52,34,161,2],[52,36,161,26],[53,0,162,4,"props"],[53,14,162,4,"props"],[53,19,162,9],[53,20,162,10,"redirectUrl"],[53,31,162,4],[53,34,162,27,"ExpoAppAuth"],[53,45,162,38],[53,46,162,39,"OAuthRedirect"],[53,59,162,4],[54,0,163,3],[56,0,164,2,"isValidProps"],[56,12,164,2,"isValidProps"],[56,24,164,14],[56,25,164,15,"props"],[56,30,164,14],[56,31,164,2],[57,0,160,0],[58,0,160,0],[58,46,165,15,"ExpoAppAuth"],[58,57,165,26],[58,58,165,27,"executeAsync"],[58,70,165,15],[58,71,165,40,"props"],[58,76,165,15],[58,77,160,0],[60,0,160,0],[61,0,160,0],[63,0,160,0],[64,0,160,0],[65,0,160,0],[66,0,160,0],[67,0,160,0],[68,0,160,0],[69,0,160,0],[71,0,168,7],[71,11,168,22,"authAsync"],[71,20,168,7],[71,21,168,32,"props"],[71,26,168,7],[72,0,168,7],[73,0,168,7],[74,0,168,7],[75,0,168,7],[76,0,168,7],[77,0,168,7],[77,46,169,15,"_executeAsync"],[77,59,169,28],[77,60,169,29,"props"],[77,65,169,28],[77,66,168,7],[79,0,168,7],[80,0,168,7],[82,0,168,7],[83,0,168,7],[84,0,168,7],[85,0,168,7],[86,0,168,7],[87,0,168,7],[88,0,168,7],[90,0,172,7],[90,11,172,22,"refreshAsync"],[90,23,172,7],[90,24,173,2,"props"],[90,29,172,7],[90,31,174,2,"refreshToken"],[90,43,172,7],[91,0,172,7],[92,0,172,7],[93,0,172,7],[94,0,172,7],[95,0,172,7],[95,16,176,7,"refreshToken"],[95,28,172,7],[96,0,172,7],[97,0,172,7],[98,0,172,7],[100,0,172,7],[100,18,176,27],[100,22,176,31,"Error"],[100,27,176,27],[100,28,176,37],[100,61,176,27],[100,62,172,7],[102,0,172,7],[103,0,172,7],[104,0,172,7],[104,46,177,15,"_executeAsync"],[104,59,177,28],[105,0,178,4,"isRefresh"],[105,14,178,4,"isRefresh"],[105,23,178,13],[105,25,178,15],[105,29,177,28],[106,0,179,4,"refreshToken"],[106,14,179,4,"refreshToken"],[106,26,179,16],[106,28,179,4,"refreshToken"],[107,0,177,28],[107,15,180,7,"props"],[107,20,177,28],[107,22,172,7],[109,0,172,7],[110,0,172,7],[112,0,172,7],[113,0,172,7],[114,0,172,7],[115,0,172,7],[116,0,172,7],[117,0,172,7],[118,0,172,7],[120,0,184,7],[120,11,184,22,"revokeAsync"],[120,22,184,7],[121,0,184,7],[123,0,184,7],[124,0,184,7],[125,0,184,7],[126,0,184,7],[127,0,185,4,"clientId"],[127,12,185,4,"clientId"],[127,20,184,7],[127,29,185,4,"clientId"],[127,37,184,7],[127,39,185,14,"issuer"],[127,45,184,7],[127,54,185,14,"issuer"],[127,60,184,7],[127,62,185,22,"serviceConfiguration"],[127,82,184,7],[127,91,185,22,"serviceConfiguration"],[127,111,184,7],[128,0,186,4,"token"],[128,12,186,4,"token"],[128,17,184,7],[128,26,186,4,"token"],[128,31,184,7],[128,63,186,11,"isClientIdProvided"],[128,81,184,7],[128,83,186,11,"isClientIdProvided"],[128,101,184,7],[128,139,186,32],[128,144,184,7],[130,0,184,7],[130,16,188,7,"token"],[130,21,184,7],[131,0,184,7],[132,0,184,7],[133,0,184,7],[135,0,184,7],[135,18,188,20],[135,22,188,24,"Error"],[135,27,188,20],[135,28,188,30],[135,64,188,20],[135,65,184,7],[137,0,184,7],[138,0,190,2,"isValidClientId"],[138,12,190,2,"isValidClientId"],[138,27,190,17],[138,28,190,18,"clientId"],[138,36,190,17],[138,37,190,2],[140,0,184,7],[140,18,193,4],[140,19,193,5,"isValidString"],[140,32,193,18],[140,33,193,19,"issuer"],[140,39,193,18],[140,40,193,4],[140,44,194,5,"serviceConfiguration"],[140,64,194,25],[140,68,194,29],[140,69,194,30,"isValidString"],[140,82,194,43],[140,83,194,44,"serviceConfiguration"],[140,103,194,64],[140,104,194,65,"revocationEndpoint"],[140,122,194,43],[140,123,184,7],[141,0,184,7],[142,0,184,7],[143,0,184,7],[145,0,184,7],[145,18,196,10],[145,22,196,14,"Error"],[145,27,196,10],[145,28,196,20],[145,102,196,10],[145,103,184,7],[147,0,184,7],[148,0,184,7],[148,18,200,6,"serviceConfiguration"],[148,38,200,26],[148,42,200,30,"serviceConfiguration"],[148,62,200,50],[148,63,200,51,"revocationEndpoint"],[148,81,184,7],[149,0,184,7],[150,0,184,7],[151,0,184,7],[153,0,201,4,"revocationEndpoint"],[153,12,201,4,"revocationEndpoint"],[153,30,201,22],[153,33,201,25,"serviceConfiguration"],[153,53,201,45],[153,54,201,46,"revocationEndpoint"],[153,72,201,4],[154,0,184,7],[155,0,184,7],[157,0,184,7],[158,0,184,7],[159,0,184,7],[159,46,203,27,"fetch"],[159,51,203,32],[159,52,203,36,"issuer"],[159,58,203,32],[159,97,184,7],[161,0,184,7],[162,0,203,10,"response"],[162,12,203,10,"response"],[162,20,184,7],[163,0,184,7],[164,0,184,7],[164,46,204,31,"response"],[164,54,204,39],[164,55,204,40,"json"],[164,59,204,31],[164,61,184,7],[166,0,184,7],[167,0,204,10,"openidConfig"],[167,12,204,10,"openidConfig"],[167,24,184,7],[168,0,206,4],[168,36,207,6,"openidConfig"],[168,48,207,18],[168,49,207,19,"revocation_endpoint"],[168,68,206,4],[168,70,208,6],[168,128,206,4],[169,0,211,4,"revocationEndpoint"],[169,12,211,4,"revocationEndpoint"],[169,30,211,22],[169,33,211,25,"openidConfig"],[169,45,211,37],[169,46,211,38,"revocation_endpoint"],[169,65,211,4],[171,0,184,7],[172,0,214,8,"body"],[172,12,214,8,"body"],[172,16,184,7],[172,30,214,24,"token"],[172,35,184,7],[172,39,214,32,"isClientIdProvided"],[172,57,214,50],[172,76,214,67,"clientId"],[172,84,214,50],[172,87,214,80],[172,89,184,7],[173,0,215,8,"headers"],[173,12,215,8,"headers"],[173,19,184,7],[173,22,215,18],[174,0,215,20],[174,30,215,36],[175,0,215,18],[175,13,184,7],[176,0,184,7],[177,0,184,7],[178,0,184,7],[178,46,217,26,"fetch"],[178,51,217,31],[178,52,217,32,"revocationEndpoint"],[178,70,217,31],[178,72,217,52],[179,0,218,6,"method"],[179,14,218,6,"method"],[179,20,218,12],[179,22,218,14],[179,28,217,52],[180,0,219,6,"headers"],[180,14,219,6,"headers"],[180,21,219,13],[180,23,219,6,"headers"],[180,30,217,52],[181,0,220,6,"body"],[181,14,220,6,"body"],[181,18,220,10],[181,20,220,6,"body"],[182,0,217,52],[182,13,217,31],[182,14,184,7],[184,0,184,7],[185,0,217,10,"results"],[185,12,217,10,"results"],[185,19,184,7],[186,0,184,7],[186,46,222,11,"results"],[186,53,184,7],[188,0,184,7],[189,0,184,7],[190,0,184,7],[191,0,184,7],[191,18,224,10],[191,22,224,14,"Error"],[191,27,224,10],[191,56,224,46],[191,69,224,52,"message"],[191,76,224,10],[191,77,184,7],[193,0,184,7],[194,0,184,7],[195,0,184,7],[196,0,184,7],[197,0,184,7],[198,0,184,7],[199,0,184,7],[201,6,228,15,"OAuthRedirect"],[201,19],[201,22,228,45,"ExpoAppAuth"],[201,33],[201,34,228,15,"OAuthRedirect"],[201,47],[202,6,228,30,"URLSchemes"],[202,16],[202,19,228,45,"ExpoAppAuth"],[202,30],[202,31,228,30,"URLSchemes"],[202,41]]},"type":"js/module"}]}