{"dependencies":[{"name":"@babel/runtime/helpers/classCallCheck","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/createClass","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/possibleConstructorReturn","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/getPrototypeOf","data":{"isAsync":false}},{"name":"@babel/runtime/helpers/inherits","data":{"isAsync":false}},{"name":"eventemitter3","data":{"isAsync":false}}],"output":[{"data":{"code":"__d(function (global, _$$_REQUIRE, _$$_IMPORT_DEFAULT, _$$_IMPORT_ALL, module, exports, _dependencyMap) {\n  'use strict';\n\n  var _classCallCheck = _$$_REQUIRE(_dependencyMap[0], \"@babel/runtime/helpers/classCallCheck\");\n\n  var _createClass = _$$_REQUIRE(_dependencyMap[1], \"@babel/runtime/helpers/createClass\");\n\n  var _possibleConstructorReturn = _$$_REQUIRE(_dependencyMap[2], \"@babel/runtime/helpers/possibleConstructorReturn\");\n\n  var _getPrototypeOf = _$$_REQUIRE(_dependencyMap[3], \"@babel/runtime/helpers/getPrototypeOf\");\n\n  var _inherits = _$$_REQUIRE(_dependencyMap[4], \"@babel/runtime/helpers/inherits\");\n\n  var EventEmitter = _$$_REQUIRE(_dependencyMap[5], \"eventemitter3\");\n\n  var MetroClient = function (_EventEmitter) {\n    _inherits(MetroClient, _EventEmitter);\n\n    function MetroClient(url) {\n      var _this;\n\n      _classCallCheck(this, MetroClient);\n\n      _this = _possibleConstructorReturn(this, _getPrototypeOf(MetroClient).call(this));\n      _this._url = url;\n      return _this;\n    }\n\n    _createClass(MetroClient, [{\n      key: \"enable\",\n      value: function enable() {\n        var _this2 = this;\n\n        if (this._ws) {\n          this.disable();\n        }\n\n        this._ws = new global.WebSocket(this._url);\n\n        this._ws.onerror = function (error) {\n          _this2.emit('connection-error', error);\n        };\n\n        this._ws.onclose = function () {\n          _this2.emit('close');\n        };\n\n        this._ws.onmessage = function (message) {\n          var data = JSON.parse(message.data);\n\n          switch (data.type) {\n            case 'update-start':\n              _this2.emit('update-start');\n\n              break;\n\n            case 'update':\n              var _data$body = data.body;\n              var modules = _data$body.modules,\n                  sourceMappingURLs = _data$body.sourceMappingURLs,\n                  sourceURLs = _data$body.sourceURLs;\n\n              _this2.emit('update');\n\n              modules.forEach(function (_ref, i) {\n                var id = _ref.id,\n                    code = _ref.code;\n                code += '\\n\\n' + sourceMappingURLs[i];\n                var injectFunction = typeof global.nativeInjectHMRUpdate === 'function' ? global.nativeInjectHMRUpdate : eval;\n                injectFunction(code, sourceURLs[i]);\n              });\n              break;\n\n            case 'update-done':\n              _this2.emit('update-done');\n\n              break;\n\n            case 'error':\n              _this2.emit('error', data.body);\n\n              break;\n\n            default:\n              _this2.emit('error', {\n                type: 'unknown-message',\n                message: data\n              });\n\n          }\n        };\n      }\n    }, {\n      key: \"disable\",\n      value: function disable() {\n        if (this._ws) {\n          this._ws.close();\n\n          this._ws = undefined;\n        }\n      }\n    }]);\n\n    return MetroClient;\n  }(EventEmitter);\n\n  module.exports = MetroClient;\n});","map":[[2,0,10,0],[14,0,12,0],[14,6,12,6,"EventEmitter"],[14,18,12,18],[14,21,12,21,"require"],[14,32,12,28],[14,68,12,0],[16,6,18,6,"MetroClient"],[16,17],[19,0,22,2],[19,25,22,14,"url"],[19,28,22,2],[19,30,22,19],[20,0,22,19],[22,0,22,19],[24,0,23,4],[25,0,24,4],[25,12,24,9,"_url"],[25,16,24,4],[25,19,24,16,"url"],[25,22,24,4],[26,0,22,19],[27,0,25,3],[31,31,27,11],[32,0,27,11],[34,0,28,4],[34,12,28,8],[34,17,28,13,"_ws"],[34,20,28,4],[34,22,28,18],[35,0,29,6],[35,15,29,11,"disable"],[35,22,29,6],[36,0,30,5],[38,0,34,4],[38,13,34,9,"_ws"],[38,16,34,4],[38,19,34,15],[38,23,34,19,"global"],[38,29,34,25],[38,30,34,26,"WebSocket"],[38,39,34,15],[38,40,34,36],[38,45,34,41,"_url"],[38,49,34,15],[38,50,34,4],[40,0,35,4],[40,13,35,9,"_ws"],[40,16,35,4],[40,17,35,13,"onerror"],[40,24,35,4],[40,27,35,23],[40,37,35,23,"error"],[40,42,35,28],[40,44,35,32],[41,0,36,6],[41,10,36,6],[41,16,36,10],[41,17,36,11,"emit"],[41,21,36,6],[41,22,36,16],[41,40,36,6],[41,42,36,36,"error"],[41,47,36,6],[42,0,37,5],[42,9,35,4],[44,0,38,4],[44,13,38,9,"_ws"],[44,16,38,4],[44,17,38,13,"onclose"],[44,24,38,4],[44,27,38,23],[44,39,38,29],[45,0,39,6],[45,10,39,6],[45,16,39,10],[45,17,39,11,"emit"],[45,21,39,6],[45,22,39,16],[45,29,39,6],[46,0,40,5],[46,9,38,4],[48,0,41,4],[48,13,41,9,"_ws"],[48,16,41,4],[48,17,41,13,"onmessage"],[48,26,41,4],[48,29,41,25],[48,39,41,25,"message"],[48,46,41,32],[48,48,41,36],[49,0,42,6],[49,14,42,12,"data"],[49,18,42,16],[49,21,42,19,"JSON"],[49,25,42,23],[49,26,42,24,"parse"],[49,31,42,19],[49,32,42,30,"message"],[49,39,42,37],[49,40,42,38,"data"],[49,44,42,19],[49,45,42,6],[51,0,43,6],[51,18,43,14,"data"],[51,22,43,18],[51,23,43,19,"type"],[51,27,43,6],[52,0,44,8],[52,17,44,13],[52,31,44,8],[53,0,45,10],[53,14,45,10],[53,20,45,14],[53,21,45,15,"emit"],[53,25,45,10],[53,26,45,20],[53,40,45,10],[55,0,46,10],[57,0,48,8],[57,17,48,13],[57,25,48,8],[58,0,48,22],[58,18,48,26,"_data$body"],[58,28,48,36],[58,31,49,10,"data"],[58,35,49,14],[58,36,49,15,"body"],[58,40,48,22],[59,0,49,20],[59,18,49,26,"modules"],[59,25,49,33],[59,28,49,36,"_data$body"],[59,38,49,46],[59,39,49,47,"modules"],[59,46,49,20],[60,0,49,20],[60,18,49,55,"sourceMappingURLs"],[60,35,49,72],[60,38,49,75,"_data$body"],[60,48,49,85],[60,49,49,86,"sourceMappingURLs"],[60,66,49,20],[61,0,49,20],[61,18,49,104,"sourceURLs"],[61,28,49,114],[61,31,49,117,"_data$body"],[61,41,49,127],[61,42,49,128,"sourceURLs"],[61,52,49,20],[63,0,51,10],[63,14,51,10],[63,20,51,14],[63,21,51,15,"emit"],[63,25,51,10],[63,26,51,20],[63,34,51,10],[65,0,52,10,"modules"],[65,14,52,10,"modules"],[65,21,52,17],[65,22,52,18,"forEach"],[65,29,52,10],[65,30,52,26],[65,40,52,27,"_ref"],[65,44,52,26],[65,46,52,33,"i"],[65,47,52,26],[65,49,52,39],[66,0,52,40],[66,20,52,44,"id"],[66,22,52,46],[66,25,52,49,"_ref"],[66,29,52,53],[66,30,52,54,"id"],[66,32,52,40],[67,0,52,40],[67,20,52,57,"code"],[67,24,52,61],[67,27,52,64,"_ref"],[67,31,52,68],[67,32,52,69,"code"],[67,36,52,40],[68,0,53,12,"code"],[68,16,53,12,"code"],[68,20,53,16],[68,24,53,20],[68,33,53,29,"sourceMappingURLs"],[68,50,53,46],[68,51,53,47,"i"],[68,52,53,46],[68,53,53,12],[69,0,58,12],[69,20,58,18,"injectFunction"],[69,34,58,32],[69,37,59,12],[69,44,59,19,"global"],[69,50,59,25],[69,51,59,26,"nativeInjectHMRUpdate"],[69,72,59,12],[69,77,59,52],[69,87,59,12],[69,90,60,12,"global"],[69,96,60,18],[69,97,60,19,"nativeInjectHMRUpdate"],[69,118,59,12],[69,121,61,12,"eval"],[69,125,58,12],[70,0,63,12,"injectFunction"],[70,16,63,12,"injectFunction"],[70,30,63,26],[70,31,63,27,"code"],[70,35,63,26],[70,37,63,33,"sourceURLs"],[70,47,63,43],[70,48,63,44,"i"],[70,49,63,43],[70,50,63,26],[70,51,63,12],[71,0,64,11],[71,15,52,10],[72,0,65,10],[74,0,67,8],[74,17,67,13],[74,30,67,8],[75,0,68,10],[75,14,68,10],[75,20,68,14],[75,21,68,15,"emit"],[75,25,68,10],[75,26,68,20],[75,39,68,10],[77,0,69,10],[79,0,71,8],[79,17,71,13],[79,24,71,8],[80,0,72,10],[80,14,72,10],[80,20,72,14],[80,21,72,15,"emit"],[80,25,72,10],[80,26,72,20],[80,33,72,10],[80,35,72,29,"data"],[80,39,72,33],[80,40,72,34,"body"],[80,44,72,10],[82,0,73,10],[84,0,75,8],[85,0,76,10],[85,14,76,10],[85,20,76,14],[85,21,76,15,"emit"],[85,25,76,10],[85,26,76,20],[85,33,76,10],[85,35,76,29],[86,0,76,31,"type"],[86,16,76,31,"type"],[86,20,76,35],[86,22,76,37],[86,39,76,29],[87,0,76,56,"message"],[87,16,76,56,"message"],[87,23,76,63],[87,25,76,65,"data"],[88,0,76,29],[88,15,76,10],[90,0,43,6],[91,0,78,5],[91,9,41,4],[92,0,79,3],[95,32,81,12],[96,0,82,4],[96,12,82,8],[96,17,82,13,"_ws"],[96,20,82,4],[96,22,82,18],[97,0,83,6],[97,15,83,11,"_ws"],[97,18,83,6],[97,19,83,15,"close"],[97,24,83,6],[99,0,84,6],[99,15,84,11,"_ws"],[99,18,84,6],[99,21,84,17,"undefined"],[99,30,84,6],[100,0,85,5],[101,0,86,3],[105,4,18,26,"EventEmitter"],[105,16],[107,0,89,0,"module"],[107,2,89,0,"module"],[107,8,89,6],[107,9,89,7,"exports"],[107,16,89,0],[107,19,89,17,"MetroClient"],[107,30,89,0]]},"type":"js/module"}]}